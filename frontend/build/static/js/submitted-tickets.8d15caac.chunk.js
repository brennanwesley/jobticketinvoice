"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[206],{1847:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(5043),r=s(2136),i=s(8729),c=s(2376),n=s(3104),l=s(3986);const o=["title","titleId"];const d=a.forwardRef((function(e,t){let{title:s,titleId:r}=e,i=(0,l.A)(e,o);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}));var x=s(579);const m=()=>{const{t:e}=(0,r.ok)(),{user:t}=(0,i.As)(),{data:s,isLoading:l,error:o,refetch:m}=(0,c.Wl)("/api/job-tickets?status=submitted",{cacheTime:18e4,onError:e=>console.error("Error fetching submitted tickets:",e)}),p=(null===s||void 0===s?void 0:s.data)||[],j=o?e("errors.fetchFailed"):null,u=(0,a.useCallback)((e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString()}catch(t){return e}}),[]),y=((0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length>t?"".concat(e.substring(0,t),"..."):e:""}),[]),(0,a.useCallback)((e=>{console.log("View ticket:",e)}),[])),k=(0,a.useMemo)((()=>p||[]),[p]);return(0,x.jsxs)("div",{className:"py-6 px-4",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:e("jobTicket.submitted")}),l?(0,x.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,x.jsx)(n.kt,{size:"lg",variant:"primary"})}):(0,x.jsx)(n.Zp,{className:"overflow-hidden",children:(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-24 sm:w-auto",children:e("jobTicket.date")}),(0,x.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-48 sm:w-1/4",children:e("jobTicket.company")}),(0,x.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-48 sm:w-1/4",children:e("jobTicket.location")}),(0,x.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-16 sm:w-auto",children:e("jobTicket.hours")}),(0,x.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:e("jobTicket.description")}),(0,x.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider w-20",children:e("common.actions")})]})}),j?(0,x.jsx)("tbody",{children:(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"6",className:"px-6 py-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-500",children:[(0,x.jsx)(d,{className:"h-5 w-5"}),(0,x.jsx)("span",{children:j}),(0,x.jsx)(n.$n,{variant:"outline",size:"sm",onClick:()=>m(),className:"ml-3",children:e("common.retry")})]})})})}):0===k.length?(0,x.jsx)("tbody",{children:(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"6",className:"px-6 py-4",children:(0,x.jsx)("div",{className:"text-center py-8",children:(0,x.jsx)("p",{className:"text-gray-400",children:e("jobTicket.noSubmitted")})})})})}):(0,x.jsx)("tbody",{className:"divide-y divide-gray-700",children:(0,x.jsx)(n.wj,{items:k,height:400,itemHeight:64,renderItem:t=>(0,x.jsx)(h,{ticket:t,formatDate:u,handleViewTicket:y,t:e},t.id),overscan:5,emptyComponent:(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"6",className:"px-6 py-4",children:(0,x.jsx)("div",{className:"text-center py-8",children:(0,x.jsx)(n.kt,{size:"md"})})})})})})]})})})]})},h=a.memo((e=>{let{ticket:t,formatDate:s,handleViewTicket:r,t:i}=e;const c=(0,a.useMemo)((()=>parseFloat(t.work_total_hours||0)+parseFloat(t.travel_total_hours||0)),[t.work_total_hours,t.travel_total_hours]);return(0,x.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s(t.job_date)}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,x.jsx)("div",{className:"truncate",children:t.company_name||i("jobTicket.untitledTicket")})}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,x.jsx)("div",{className:"truncate",children:t.location||"-"})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,x.jsx)("div",{className:"truncate",children:t.description||"-"})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,x.jsx)(n.$n,{variant:"outline",size:"sm",onClick:()=>r(t.id),className:"text-orange-500 hover:text-orange-400","aria-label":"".concat(i("common.view")," ").concat(t.company_name||i("jobTicket.untitledTicket")),children:i("common.view")})})]})})),p=a.memo(m)}}]);
//# sourceMappingURL=submitted-tickets.8d15caac.chunk.js.map
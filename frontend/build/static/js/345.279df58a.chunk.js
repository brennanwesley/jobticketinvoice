"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[345],{911:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(5043),r=s(2136),l=s(579);const i=()=>{const{language:e,toggleLanguage:t}=(0,r.ok)(),s="en"===e?"Espa\xf1ol":"English",a="es"===e?"click for":"haga clic para";return(0,l.jsxs)("button",{onClick:t,className:"absolute top-0 right-0 m-4 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors flex items-center focus:outline-none focus:ring-2 focus:ring-orange-700","aria-label":"".concat(a," ").concat(s),title:"".concat(a," ").concat(s),tabIndex:0,children:[(0,l.jsx)("span",{className:"text-xs italic text-white mr-1",children:a}),(0,l.jsx)("span",{children:s})]})},o=(0,a.memo)(i)},2704:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(3986),r=s(5043);const l=["title","titleId"];const i=r.forwardRef((function(e,t){let{title:s,titleId:i}=e,o=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},o),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}))},3059:(e,t,s)=>{s.d(t,{YR:()=>c,yS:()=>d});var a=s(5043),r=s(9424),l=s(6161),i=s(6207),o=s(9016);const n=(0,a.createContext)(),c=e=>{let{children:t}=e;return t},d=()=>{const e=(0,a.useContext)(n),t=(0,r.oz)()||{},s=(0,l.EE)()||{},c=(0,i.kt)()||{},d=(0,o.PN)()||{},m=(0,a.useMemo)((()=>({viewMode:d.viewMode||"landing",setViewMode:d.navigateTo||(()=>console.warn("navigateTo not available")),ticketMode:d.ticketMode||null,setTicketMode:d.setTicketMode||(()=>console.warn("setTicketMode not available")),formData:s.formData,setFormData:s.setFormData,updateFormData:s.updateFormField,handleInputChange:s.handleInputChange,resetForm:s.resetForm,addPart:s.addPart,removePart:s.removePart,draftTickets:t.draftTickets,setDraftTickets:()=>console.warn("setDraftTickets is deprecated, use DraftTicketContext methods instead"),selectedDraftTicket:t.selectedDraftTicket,setSelectedDraftTicket:t.setSelectedDraftTicket,saveJobTicketAsDraft:t.saveDraft,deleteDraftTicket:t.deleteDraft,loadDraftIntoForm:t.loadDraftIntoForm,submitJobTicket:c.submitJobTicket,isSubmitting:c.isSubmitting,submitError:c.submitError,submitSuccess:c.submitSuccess})),[d,s,t,c]);return e||m}},3309:(e,t,s)=>{s.d(t,{A:()=>w});var a=s(5043),r=s(2136),l=s(3059),i=s(9489),o=s(3216),n=s(5475),c=s(3986);const d=["title","titleId"];const m=a.forwardRef((function(e,t){let{title:s,titleId:r}=e,l=(0,c.A)(e,d);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}))})),u=["title","titleId"];const x=a.forwardRef((function(e,t){let{title:s,titleId:r}=e,l=(0,c.A)(e,u);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))})),p=["title","titleId"];const b=a.forwardRef((function(e,t){let{title:s,titleId:r}=e,l=(0,c.A)(e,p);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"}))}));var h=s(2704),g=s(2807),j=s(2376),y=s(579);const k=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")},f={"/profile":a.lazy((()=>s.e(949).then(s.bind(s,7949)))),"/":a.lazy((()=>Promise.resolve().then(s.bind(s,6782)))),"/submitted":a.lazy((()=>s.e(228).then(s.bind(s,1847)))),"/drafts":a.lazy((()=>s.e(948).then(s.bind(s,948))))},v=(0,a.forwardRef)(((e,t)=>{let{sidebarOpen:s,setSidebarOpen:c}=e;const{t:d}=(0,r.ok)(),{viewMode:u,setViewMode:p,draftTickets:v,selectedDraftTicket:w,setSelectedDraftTicket:T,setTicketMode:N}=(0,l.yS)(),{user:C,isAuthenticated:S,logout:O}=(0,i.As)();(0,o.zy)();(0,j.Eh)(f);const D=(0,a.useCallback)((()=>{N("manual"),p("form")}),[N,p]),M=(0,a.useCallback)((()=>{p("submittedList")}),[p]),E=(0,a.useCallback)((()=>{p("draftList")}),[p]),A=(0,a.useCallback)((()=>{O()}),[O]);return(0,y.jsx)("div",{ref:t,className:k(s?"translate-x-0":"-translate-x-full","fixed top-0 left-0 z-40 h-full w-64 bg-gray-900 transition-transform duration-300 ease-in-out md:translate-x-0"),children:(0,y.jsxs)("div",{className:"flex h-full flex-col gap-y-5 overflow-y-auto px-6 py-4",children:[(0,y.jsx)("div",{className:"flex h-16 shrink-0 items-center",children:(0,y.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Job Ticket"})}),(0,y.jsx)("div",{className:"flex flex-shrink-0 items-center px-4",children:(0,y.jsx)(g._V,{className:"h-8 w-auto",src:"/logo.png",alt:"JobTicketInvoice",lazy:!1})}),S&&C&&(0,y.jsxs)("div",{className:"mt-5 flex flex-col items-center px-4 pb-5 border-b border-gray-800",children:[(0,y.jsx)("div",{className:"relative",children:(0,y.jsx)("div",{className:"h-12 w-12 rounded-full bg-slate-700 flex items-center justify-center",children:C.logo_url?(0,y.jsx)(g._V,{src:C.logo_url,alt:"User",className:"h-10 w-10 rounded-full object-cover",fallbackSrc:"",lazy:!1}):(0,y.jsx)(m,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})})}),(0,y.jsxs)("div",{className:"mt-3 text-center",children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-400",children:d("common.loggedInAs")}),(0,y.jsx)("p",{className:"text-base font-semibold text-white truncate max-w-[200px]",children:C.name||C.email}),(0,y.jsxs)("div",{className:"mt-2 flex flex-col space-y-1",children:[(0,y.jsx)(n.N_,{to:"/profile",className:"text-xs text-orange-500 hover:text-orange-400",children:d("nav.profile")}),(0,y.jsx)("button",{onClick:A,className:"text-xs text-gray-400 hover:text-gray-300",children:d("nav.logout")})]})]})]}),(0,y.jsx)("nav",{className:"flex flex-1 flex-col",children:(0,y.jsx)("ul",{className:"flex flex-1 flex-col gap-y-7",children:(0,y.jsx)("li",{children:(0,y.jsxs)("ul",{className:"-mx-2 space-y-1",children:[(0,y.jsx)("li",{className:"mb-6",children:(0,y.jsxs)(n.N_,{to:"/",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded flex items-center justify-center gap-x-2 w-full transition-colors",children:[(0,y.jsx)(x,{className:"h-5 w-5","aria-hidden":"true"}),(0,y.jsx)("span",{children:d("jobTicket.createNew")})]})}),(0,y.jsx)("li",{children:(0,y.jsx)("div",{className:"text-sm font-semibold leading-6 text-white px-2 mb-3",children:d("nav.jobTickets")})}),(0,y.jsx)("li",{children:(0,y.jsxs)("button",{onClick:M,className:k("submittedList"===u?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold w-full text-left"),children:[(0,y.jsx)(b,{className:"h-6 w-6 shrink-0","aria-hidden":"true"}),d("nav.submitted")]})}),(0,y.jsx)("li",{children:(0,y.jsxs)("button",{onClick:E,className:k("draftList"===u?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold w-full text-left"),children:[(0,y.jsx)(h.A,{className:"h-6 w-6 shrink-0","aria-hidden":"true"}),d("nav.drafts"),v.length>0&&(0,y.jsx)("span",{className:"ml-auto w-5 h-5 rounded-full bg-orange-500 flex items-center justify-center text-xs text-white",children:v.length})]})}),!1]})})})})]})})})),w=(0,a.memo)(v)},4111:(e,t,s)=>{s.d(t,{_P:()=>r});const a=e=>{if(!e)return!1;return/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/.test(e)},r=(e,t)=>{if(!a(e)||!a(t))return null;const[s,r]=e.split(":").map(Number),[l,i]=t.split(":").map(Number);let o=l-s,n=i-r;return n<0&&(o--,n+=60),o<0&&(o+=24),parseFloat((o+n/60).toFixed(2))}},5967:(e,t,s)=>{s.d(t,{Vq:()=>j,cx:()=>v,pr:()=>O,zt:()=>T,zh:()=>h,nZ:()=>k,mO:()=>C});var a=s(2555),r=s(5043),l=s(4858),i=s(2136),o=s(3059),n=s(9489),c=s(4111),d=s(2807),m=s(2376),u=s(579);const x=e=>{let{children:t,onSubmit:s,readOnly:x=!1,draftData:p=null}=e;const{t:b}=(0,i.ok)(),{formData:h,updateFormData:g,saveJobTicketAsDraft:j,submitJobTicket:y,isSubmitting:k,submitError:f,submitSuccess:v}=(0,o.yS)(),{user:w}=(0,n.As)(),T=(0,r.useMemo)((()=>p||h||{}),[p,h]),{register:N,handleSubmit:C,control:S,setValue:O,watch:D,formState:{errors:M}}=(0,l.mN)({defaultValues:T,mode:"onChange"}),E=D("workStartTime"),A=D("workEndTime"),F=D("driveStartTime"),P=D("driveEndTime"),V=(0,m.d7)(E,300),q=(0,m.d7)(A,300),z=(0,m.d7)(F,300),I=(0,m.d7)(P,300),L=(0,r.useCallback)((()=>V&&q?(0,c._P)(V,q):null),[V,q]),H=(0,r.useCallback)((()=>z&&I?(0,c._P)(z,I):null),[z,I]);(0,r.useEffect)((()=>{const e=L();null!==e&&O("workTotalHours",e)}),[L,O]),(0,r.useEffect)((()=>{const e=H();null!==e&&O("driveTotalHours",e)}),[H,O]),(0,r.useEffect)((()=>{const e=D(((e,t)=>{let{name:s,type:a}=t;if("change"===a&&s){const t=setTimeout((()=>{g(s,e[s])}),500);return()=>clearTimeout(t)}}));return()=>e.unsubscribe()}),[D,g]);const[B,$]=(0,r.useState)(!1),[J,R]=(0,r.useState)(!1);(0,r.useEffect)((()=>{v&&($(!0),setTimeout((()=>$(!1)),5e3))}),[v]),(0,r.useEffect)((()=>{f&&(R(!0),setTimeout((()=>R(!1)),5e3))}),[f]);const _=(0,r.useCallback)((async e=>{try{const t=j(e);if(s)return void await s(t);await y(t)}catch(t){console.error("Error submitting job ticket:",t)}}),[s,j,y]);(0,r.useEffect)((()=>{null!==w&&void 0!==w&&w.name&&!D("submittedBy")&&O("submittedBy",w.name)}),[w,O,D]);const Z=(0,r.useMemo)((()=>performance.now()),[]);return(0,r.useEffect)((()=>{const e=performance.now()-Z;return console.log("BaseJobTicketForm rendered in ".concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("base-job-ticket-form-render")}}),[Z]),(0,u.jsxs)(d.lV,{onSubmit:C(_),className:"space-y-8 max-w-3xl mx-auto",children:[(0,u.jsx)(d.pd,{label:b("jobTicket.date"),type:"date",id:"jobDate",name:"jobDate",register:N,rules:{required:!0},error:M.jobDate,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.companyName"),type:"text",id:"companyName",name:"companyName",register:N,rules:{required:!0},error:M.companyName,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.customerName"),type:"text",id:"customerName",name:"customerName",register:N,error:M.customerName,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.location"),type:"text",id:"location",name:"location",register:N,error:M.location,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.workType"),type:"text",id:"workType",name:"workType",register:N,error:M.workType,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.equipment"),type:"text",id:"equipment",name:"equipment",register:N,error:M.equipment,readOnly:x}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsx)(d.pd,{label:b("jobTicket.workStartTime"),type:"time",id:"workStartTime",name:"workStartTime",register:N,error:M.workStartTime,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.workEndTime"),type:"time",id:"workEndTime",name:"workEndTime",register:N,error:M.workEndTime,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.workTotalTime"),type:"text",id:"workTotalHours",name:"workTotalHours",register:N,readOnly:!0})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsx)(d.pd,{label:b("jobTicket.travelStartTime"),type:"time",id:"driveStartTime",name:"driveStartTime",register:N,error:M.driveStartTime,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.travelEndTime"),type:"time",id:"driveEndTime",name:"driveEndTime",register:N,error:M.driveEndTime,readOnly:x}),(0,u.jsx)(d.pd,{label:b("jobTicket.travelTotalTime"),type:"text",id:"driveTotalHours",name:"driveTotalHours",register:N,readOnly:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workDescription",className:"block text-sm font-medium text-gray-300",children:b("jobTicket.workDescription")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"workDescription",name:"workDescription",rows:4,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:x},N("workDescription")))})]}),(0,u.jsx)(d.pd,{label:b("jobTicket.submittedBy"),type:"text",id:"submittedBy",name:"submittedBy",register:N,error:M.submittedBy,readOnly:x}),t,B&&(0,u.jsxs)(d.Zp,{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:[(0,u.jsxs)("strong",{className:"font-bold",children:[b("common.success"),"!"]}),(0,u.jsxs)("span",{className:"block sm:inline",children:[" ",b("jobTicket.submitted")]})]}),J&&(0,u.jsxs)(d.Zp,{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[(0,u.jsxs)("strong",{className:"font-bold",children:[b("common.error"),"!"]}),(0,u.jsxs)("span",{className:"block sm:inline",children:[" ",b("jobTicket.submitError")]})]}),!x&&(0,u.jsx)("div",{className:"pt-5",children:(0,u.jsx)("div",{className:"flex justify-center sm:justify-end",children:(0,u.jsx)(d.$n,{type:"submit",disabled:k,variant:k?"disabled":"primary",size:"lg",children:k?(0,u.jsxs)("div",{className:"flex items-center",children:[b("jobTicket.submitting"),(0,u.jsx)(d.kt,{size:"sm",className:"ml-2"})]}):b("jobTicket.submitTicket")})})})]})},p=r.memo(x),b=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:x}=(0,l.mN)({defaultValues:s||{}}),[b,h]=(0,r.useState)(""),g=(0,r.useMemo)((()=>[{value:"partLubricant",label:o("parts.lubricant")},{value:"partPumpSeal",label:o("parts.pumpSeal")},{value:"partThrustChamber",label:o("parts.thrustChamber")},{value:"partVFDBreaker",label:o("parts.vfdBreaker")},{value:"partServiceKit",label:o("parts.serviceKit")},{value:"partOther",label:o("parts.other")}]),[o]),j=(0,r.useCallback)((()=>{if(!b)return;const e=g.find((e=>e.value===b));if(!e)return;const t=m("parts")||[];x("parts",[...t,{value:b,label:e.label}]),h("")}),[b,g,m,x]),y=(0,r.useCallback)((e=>{const t=[...m("parts")||[]];t.splice(e,1),x("parts",t)}),[m,x]),k=(0,r.useCallback)((e=>{const t=e.target.value,s=g.find((e=>e.value===t));h(s?t:"")}),[g]),f=(0,r.useMemo)((()=>{const e=m("parts")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noParts")}):e.map(((e,s)=>{let a;if("object"===typeof e&&e.label)a=e.label;else if("string"===typeof e){const t=e.replace(/^part/,"").charAt(0).toLowerCase()+e.replace(/^part/,"").slice(1);a=o("parts.".concat(t))}else a=String(e);return(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsx)("span",{children:a}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>y(s),children:o("common.remove")})]},s)}))}),[m,o,t,y]);return(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"installation",children:o("workTypes.installation")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")})]}))})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.equipment"),type:"text",id:"equipment",name:"equipment",register:c,placeholder:o("jobTicket.equipmentPlaceholder"),readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.partsUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsxs)("select",{value:b,onChange:k,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),g.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!b,children:"Add Part"})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"parts",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:f})}})})]})]})},h=r.memo(b),g=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{register:n,formState:{errors:c}}=(0,l.mN)({defaultValues:s||{}}),m=(0,r.useMemo)((()=>[{value:"",label:o("common.select")},{value:"truck",label:o("vehicleTypes.truck")||"Truck"},{value:"van",label:o("vehicleTypes.van")||"Van"},{value:"car",label:o("vehicleTypes.car")||"Car"}]),[o]),x=(0,r.useMemo)((()=>performance.now()),[]);return r.useEffect((()=>{const e=performance.now()-x;return console.log("DriverTicketForm rendered in ".concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("driver-ticket-form-render")}}),[x]),(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"vehicleType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.vehicleType")||"Vehicle Type"}),(0,u.jsxs)("div",{className:"mt-1",children:[(0,u.jsx)("select",(0,a.A)((0,a.A)({id:"vehicleType",name:"vehicleType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},n("vehicleType",{required:!0})),{},{children:m.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})),c.vehicleType&&(0,u.jsx)("p",{className:"mt-1 text-sm text-red-500",children:o("validation.required")})]})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.mileage")||"Mileage",type:"number",id:"mileage",name:"mileage",register:n,rules:{required:!0,min:0},error:c.mileage,placeholder:o("jobTicket.mileagePlaceholder")||"Enter total miles driven",readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"tripType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.tripType")||"Trip Type"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"tripType",name:"tripType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},n("tripType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"local",children:o("tripTypes.local")||"Local"}),(0,u.jsx)("option",{value:"longHaul",children:o("tripTypes.longHaul")||"Long Haul"})]}))})]})]})},j=r.memo(g),y=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:x}=(0,l.mN)({defaultValues:s||{}}),[b,h]=(0,r.useState)(""),g=(0,r.useMemo)((()=>[{value:o("materials.pipe"),label:o("materials.pipe")},{value:o("materials.fittings"),label:o("materials.fittings")},{value:o("materials.valves"),label:o("materials.valves")},{value:o("materials.tools"),label:o("materials.tools")},{value:o("materials.safety"),label:o("materials.safety")},{value:o("materials.other"),label:o("materials.other")}]),[o]),j=(0,r.useCallback)((()=>{if(!b)return;const e=m("materials")||[];x("materials",[...e,b]),h("")}),[b,m,x]),y=(0,r.useCallback)((e=>{const t=[...m("materials")||[]];t.splice(e,1),x("materials",t)}),[m,x]),k=(0,r.useCallback)((e=>{h(e.target.value)}),[]),f=(0,r.useMemo)((()=>{const e=m("materials")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noMaterials")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsx)("span",{children:e}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>y(s),children:o("common.remove")})]},s)))}),[m,o,t,y]);return(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"construction",children:o("workTypes.construction")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"pipeline",children:o("workTypes.pipeline")}),(0,u.jsx)("option",{value:"wellService",children:o("workTypes.wellService")})]}))})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.equipmentUsed"),type:"text",id:"equipmentUsed",name:"equipmentUsed",register:c,placeholder:o("jobTicket.equipmentUsedPlaceholder"),readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.materialsUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsxs)("select",{value:b,onChange:k,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),g.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!b,children:o("common.add")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"materials",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:f})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"siteConditions",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.siteConditions")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"siteConditions",name:"siteConditions",rows:3,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:o("jobTicket.siteConditionsPlaceholder")},c("siteConditions")))})]})]})},k=r.memo(y),f=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:x}=(0,l.mN)({defaultValues:s||{}}),[b,h]=(0,r.useState)(""),g=(0,r.useMemo)((()=>[{value:o("components.wiring"),label:o("components.wiring")},{value:o("components.breakers"),label:o("components.breakers")},{value:o("components.switches"),label:o("components.switches")},{value:o("components.panels"),label:o("components.panels")},{value:o("components.motors"),label:o("components.motors")},{value:o("components.other"),label:o("components.other")}]),[o]),j=(0,r.useCallback)((()=>{if(!b)return;const e=m("components")||[];x("components",[...e,b]),h("")}),[b,m,x]),y=(0,r.useCallback)((e=>{const t=[...m("components")||[]];t.splice(e,1),x("components",t)}),[m,x]),k=(0,r.useCallback)((e=>{h(e.target.value)}),[]),f=(0,r.useMemo)((()=>{const e=m("components")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noComponents")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsx)("span",{children:e}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>y(s),children:o("common.remove")})]},s)))}),[m,o,t,y]);return(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"installation",children:o("workTypes.installation")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")}),(0,u.jsx)("option",{value:"troubleshooting",children:o("workTypes.troubleshooting")})]}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.voltage"),type:"text",id:"voltage",name:"voltage",register:c,placeholder:"e.g., 120V, 240V, 480V",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.amperage"),type:"text",id:"amperage",name:"amperage",register:c,placeholder:"e.g., 15A, 20A, 30A",readOnly:t})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.componentsUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsxs)("select",{value:b,onChange:k,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),g.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!b,children:o("common.add")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"components",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:f})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"safetyMeasures",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.safetyMeasures")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"safetyMeasures",name:"safetyMeasures",rows:3,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:o("jobTicket.safetyMeasuresPlaceholder")},c("safetyMeasures")))})]})]})},v=r.memo(f),w=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:x}=(0,l.mN)({defaultValues:s||{}}),[b,h]=(0,r.useState)(""),[g,j]=(0,r.useState)("pass"),[y,k]=(0,r.useState)(""),f=(0,r.useCallback)((()=>{if(!b)return;const e=m("inspections")||[];x("inspections",[...e,{point:b,status:g,notes:y}]),h(""),j("pass"),k("")}),[b,g,y,m,x]),v=(0,r.useCallback)((e=>{const t=[...m("inspections")||[]];t.splice(e,1),x("inspections",t)}),[m,x]),w=(0,r.useMemo)((()=>{const e=m("inspections")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noInspections")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"bg-gray-700 rounded px-3 py-2",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"font-medium",children:e.point}),(0,u.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs ".concat("pass"===e.status?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),children:"pass"===e.status?o("jobTicket.pass"):o("jobTicket.fail")})]}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>v(s),children:o("common.remove")})]}),e.notes&&(0,u.jsx)("div",{className:"mt-1 text-sm text-gray-300",children:e.notes})]},s)))}),[m,o,t,v]);return(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"monitoring",children:o("workTypes.monitoring")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"emergency",children:o("workTypes.emergency")})]}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.pressureReading"),type:"text",id:"pressureReading",name:"pressureReading",register:c,placeholder:"e.g., 65 PSI",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.flowReading"),type:"text",id:"flowReading",name:"flowReading",register:c,placeholder:"e.g., 250 GPM",readOnly:t})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.pipelineSection"),type:"text",id:"pipelineSection",name:"pipelineSection",register:c,placeholder:o("jobTicket.pipelineSectionPlaceholder"),readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.inspectionPoints")}),!t&&(0,u.jsxs)("div",{className:"space-y-3 mb-3 bg-gray-800 p-4 rounded-md",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"inspectionPoint",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.inspectionPoint")}),(0,u.jsx)("input",{type:"text",id:"inspectionPoint",value:b,onChange:e=>h(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.inspectionPointPlaceholder")})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"inspectionStatus",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.status")}),(0,u.jsxs)("select",{id:"inspectionStatus",value:g,onChange:e=>j(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"pass",children:o("jobTicket.pass")}),(0,u.jsx)("option",{value:"fail",children:o("jobTicket.fail")})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"inspectionNotes",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.notes")}),(0,u.jsx)("textarea",{id:"inspectionNotes",value:y,onChange:e=>k(e.target.value),rows:2,className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.notesPlaceholder")})]}),(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:f,disabled:!b,children:o("common.add")})})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[300px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"inspections",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:w})}})})]})]})},T=r.memo(w),N=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:x}=(0,l.mN)({defaultValues:s||{}}),[b,h]=(0,r.useState)(""),[g,j]=(0,r.useState)(""),[y,k]=(0,r.useState)(""),f=(0,r.useCallback)((()=>{if(!b||!y)return;const e=m("loads")||[];x("loads",[...e,{description:b,weight:g,destination:y}]),h(""),j(""),k("")}),[b,g,y,m,x]),v=(0,r.useCallback)((e=>{const t=[...m("loads")||[]];t.splice(e,1),x("loads",t)}),[m,x]),w=(0,r.useMemo)((()=>{const e=m("loads")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noLoads")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"bg-gray-700 rounded px-3 py-2",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("div",{className:"font-medium",children:e.description}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>v(s),children:o("common.remove")})]}),(0,u.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-2 text-sm text-gray-300",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{className:"text-gray-400",children:[o("jobTicket.weight"),": "]}),e.weight||"N/A"]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{className:"text-gray-400",children:[o("jobTicket.destination"),": "]}),e.destination]})]})]},s)))}),[m,o,t,v]);return(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"delivery",children:o("workTypes.delivery")}),(0,u.jsx)("option",{value:"pickup",children:o("workTypes.pickup")}),(0,u.jsx)("option",{value:"transport",children:o("workTypes.transport")}),(0,u.jsx)("option",{value:"equipment",children:o("workTypes.equipment")}),(0,u.jsx)("option",{value:"supplies",children:o("workTypes.supplies")})]}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.vehicleId"),type:"text",id:"vehicleId",name:"vehicleId",register:c,placeholder:"e.g., TRK-2023-104",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.vehicleType"),type:"text",id:"vehicleType",name:"vehicleType",register:c,placeholder:"e.g., Semi-truck, Pickup, Tanker",readOnly:t})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.startingMileage"),type:"number",id:"startingMileage",name:"startingMileage",register:c,placeholder:"e.g., 45780",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.endingMileage"),type:"number",id:"endingMileage",name:"endingMileage",register:c,placeholder:"e.g., 45920",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.totalMileage"),type:"number",id:"totalMileage",name:"totalMileage",register:c,readOnly:!0,value:m("endingMileage")&&m("startingMileage")?Math.max(0,Number(m("endingMileage"))-Number(m("startingMileage"))):""})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.loadDetails")}),!t&&(0,u.jsxs)("div",{className:"space-y-3 mb-3 bg-gray-800 p-4 rounded-md",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"loadDescription",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.loadDescription")}),(0,u.jsx)("input",{type:"text",id:"loadDescription",value:b,onChange:e=>h(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.loadDescriptionPlaceholder")})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"loadWeight",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.weight")}),(0,u.jsx)("input",{type:"text",id:"loadWeight",value:g,onChange:e=>j(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:"e.g., 2500 lbs"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"loadDestination",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.destination")}),(0,u.jsx)("input",{type:"text",id:"loadDestination",value:y,onChange:e=>k(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.destinationPlaceholder")})]})]}),(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:f,disabled:!b||!y,children:o("common.add")})})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[300px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"loads",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:w})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.vehicleInspection")}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionFuel",name:"inspectionFuel",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionFuel")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionFuel",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.fuelChecked")})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionTires",name:"inspectionTires",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionTires")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionTires",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.tiresChecked")})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionOil",name:"inspectionOil",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionOil")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionOil",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.oilChecked")})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionLights",name:"inspectionLights",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionLights")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionLights",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.lightsChecked")})]})]})]})]})},C=r.memo(N),S=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:x}=(0,l.mN)({defaultValues:s||{}}),[b,h]=(0,r.useState)(""),[g,j]=(0,r.useState)(""),y=(0,r.useCallback)((()=>{if(!b)return;const e=m("items")||[];x("items",[...e,{name:b,quantity:g||"1"}]),h(""),j("")}),[b,g,m,x]),k=(0,r.useCallback)((e=>{const t=[...m("items")||[]];t.splice(e,1),x("items",t)}),[m,x]),f=(0,r.useMemo)((()=>{const e=m("items")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noItems")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsxs)("span",{children:[e.name,e.quantity&&"1"!==e.quantity&&(0,u.jsxs)("span",{className:"ml-2 text-sm text-gray-400",children:["(",o("jobTicket.quantity"),": ",e.quantity,")"]})]}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>k(s),children:o("common.remove")})]},s)))}),[m,o,t,k]);return(0,u.jsxs)(p,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"customJobType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.customJobType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("input",(0,a.A)({type:"text",id:"customJobType",name:"customJobType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t,placeholder:o("jobTicket.customJobTypePlaceholder")},c("customJobType")))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"installation",children:o("workTypes.installation")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")}),(0,u.jsx)("option",{value:"other",children:o("workTypes.other")})]}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.materialsEquipmentUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsx)("input",{type:"text",value:b,onChange:e=>h(e.target.value),className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.itemNamePlaceholder")})}),(0,u.jsx)("div",{className:"w-24",children:(0,u.jsx)("input",{type:"text",value:g,onChange:e=>j(e.target.value),className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.qty")})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:y,disabled:!b,children:o("common.add")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"items",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:f})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"additionalNotes",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.additionalNotes")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"additionalNotes",name:"additionalNotes",rows:4,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:o("jobTicket.additionalNotesPlaceholder")},c("additionalNotes")))})]})]})},O=r.memo(S)},6782:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(2555),r=s(5043),l=s(4858),i=s(2136),o=s(3059),n=s(4111),c=s(2807),d=s(2376),m=s(579);const u=e=>{var t,s;let{readOnly:u=!1,draftData:x=null}=e;const{t:p}=(0,i.ok)(),{formData:b,updateFormData:h,saveJobTicketAsDraft:g}=(0,o.yS)(),[j,y]=(0,r.useState)(""),{register:k,handleSubmit:f,control:v,setValue:w,watch:T,formState:{errors:N}}=(0,l.mN)({defaultValues:x||b,mode:"onChange"}),C=T("workStartTime"),S=T("workEndTime"),O=T("driveStartTime"),D=T("driveEndTime"),M=(0,d.d7)(C,300),E=(0,d.d7)(S,300),A=(0,d.d7)(O,300),F=(0,d.d7)(D,300);(0,r.useEffect)((()=>{if(M&&E){const e=(0,n._P)(M,E);null!==e&&w("workTotalHours",e)}}),[M,E,w]),(0,r.useEffect)((()=>{if(A&&F){const e=(0,n._P)(A,F);null!==e&&w("driveTotalHours",e)}}),[A,F,w]),(0,r.useEffect)((()=>{const e=T(((e,t)=>{let{name:s,type:a}=t;"change"===a&&s&&h(s,e[s])}));return()=>e.unsubscribe()}),[T,h]);const P=(0,r.useMemo)((()=>[{value:p("partLubricant"),label:p("partLubricant")},{value:p("partPumpSeal"),label:p("partPumpSeal")},{value:p("partThrustChamber"),label:p("partThrustChamber")},{value:p("partVFDBreaker"),label:p("partVFDBreaker")},{value:p("partServiceKit"),label:p("partServiceKit")},{value:p("partOther"),label:p("partOther")}]),[p]),V=(0,r.useCallback)((()=>{if(!j)return;const e=T("parts")||[];w("parts",[...e,j]),y("")}),[j,T,w]),q=(0,r.useCallback)((e=>{const t=[...T("parts")||[]];t.splice(e,1),w("parts",t)}),[T,w]),{submitJobTicket:z,isSubmitting:I,submitError:L,submitSuccess:H}=(0,o.yS)(),[B,$]=(0,r.useState)(!1),[J,R]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(H){$(!0);const e=setTimeout((()=>$(!1)),5e3);return()=>clearTimeout(e)}}),[H]),(0,r.useEffect)((()=>{if(L){R(!0);const e=setTimeout((()=>R(!1)),5e3);return()=>clearTimeout(e)}}),[L]);const _=(0,d.DW)((async e=>{try{const t=g(e);await z(t)}catch(t){console.error("Error submitting job ticket:",t)}}));return(0,m.jsx)(c.lV,{onSubmit:f(_),className:"space-y-6 max-w-3xl mx-auto",children:(0,m.jsxs)(c.Zp,{className:"p-6",children:[B&&(0,m.jsx)("div",{className:"mb-4 p-4 bg-green-900 bg-opacity-20 border border-green-700 rounded-md",children:(0,m.jsx)("p",{className:"text-green-400",children:p("jobTicket.submitSuccess")})}),J&&(0,m.jsx)("div",{className:"mb-4 p-4 bg-red-900 bg-opacity-20 border border-red-700 rounded-md",children:(0,m.jsx)("p",{className:"text-red-400",children:L})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsx)(c.pd,{type:"date",id:"jobDate",name:"jobDate",label:p("jobTicket.date"),register:k,rules:{required:!0},error:N.jobDate,errorText:p("errors.required"),readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"companyName",name:"companyName",label:p("jobTicket.companyName"),register:k,rules:{required:!0},error:N.companyName,errorText:p("errors.required"),readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"customerName",name:"customerName",label:p("jobTicket.customerName"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"location",name:"location",label:p("jobTicket.location"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"workType",name:"workType",label:p("jobTicket.workType")||"Work Type",register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"equipment",name:"equipment",label:p("jobTicket.equipment")||"Equipment Serviced",register:k,readOnly:u})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:p("jobTicket.workTotalTime")}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)(c.pd,{type:"time",id:"workStartTime",name:"workStartTime",label:p("jobTicket.workStartTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"time",id:"workEndTime",name:"workEndTime",label:p("jobTicket.workEndTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"number",id:"workTotalHours",name:"workTotalHours",label:p("jobTicket.workTotalTime"),register:k,readOnly:!0,step:"0.01"})]})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:p("jobTicket.travelTotalTime")}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)(c.pd,{type:"time",id:"driveStartTime",name:"driveStartTime",label:p("jobTicket.travelStartTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"time",id:"driveEndTime",name:"driveEndTime",label:p("jobTicket.travelEndTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"number",id:"driveTotalHours",name:"driveTotalHours",label:p("jobTicket.travelTotalTime"),register:k,readOnly:!0,step:"0.01"})]})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:p("jobTicket.parts.title")}),!u&&(0,m.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,m.jsxs)("select",{className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:j,onChange:e=>y(e.target.value),children:[(0,m.jsx)("option",{value:"",children:p("selectPartsPlaceholder")}),P.map((e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,m.jsx)(c.$n,{type:"button",onClick:V,disabled:!j,variant:"secondary",children:p("addPart")})]}),(0,m.jsx)("div",{className:"bg-gray-800 rounded-md border border-gray-700 p-4",children:(null===(t=T("parts"))||void 0===t?void 0:t.length)>0?(0,m.jsx)("ul",{className:"divide-y divide-gray-700",children:null===(s=T("parts"))||void 0===s?void 0:s.map(((e,t)=>(0,m.jsxs)("li",{className:"py-2 flex justify-between items-center",children:[(0,m.jsx)("span",{children:e}),!u&&(0,m.jsx)(c.$n,{type:"button",onClick:()=>q(t),variant:"danger",size:"sm",children:p("removePart")})]},t)))}):(0,m.jsx)("p",{className:"text-gray-400",children:p("noParts","No parts added")})})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("label",{htmlFor:"workDescription",className:"block text-sm font-medium text-gray-300",children:p("jobTicket.workDescription")}),(0,m.jsx)("div",{className:"mt-1",children:(0,m.jsx)("textarea",(0,a.A)((0,a.A)({id:"workDescription",name:"workDescription",className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",rows:4,placeholder:p("jobTicket.workDescription")},k("workDescription")),{},{readOnly:u}))})]}),!u&&(0,m.jsx)("div",{className:"mt-8 flex justify-end",children:(0,m.jsx)(c.$n,{type:"submit",disabled:I,className:"w-full md:w-auto",children:p(I?"submitting":"submit")})})]})})},x=r.memo(u)},9265:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(3986),r=s(5043);const l=["title","titleId"];const i=r.forwardRef((function(e,t){let{title:s,titleId:i}=e,o=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},o),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}))}}]);
//# sourceMappingURL=345.279df58a.chunk.js.map
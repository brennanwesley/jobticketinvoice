"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[418,782],{911:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(5043),r=s(2136),l=s(579);const i=()=>{const{language:e,toggleLanguage:t}=(0,r.ok)(),s="en"===e?"Espa\xf1ol":"English",a="es"===e?"click for":"haga clic para";return(0,l.jsxs)("button",{onClick:t,className:"absolute top-0 right-0 m-4 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors flex items-center focus:outline-none focus:ring-2 focus:ring-orange-700","aria-label":"".concat(a," ").concat(s),title:"".concat(a," ").concat(s),tabIndex:0,children:[(0,l.jsx)("span",{className:"text-xs italic text-white mr-1",children:a}),(0,l.jsx)("span",{children:s})]})},o=(0,a.memo)(i)},4111:(e,t,s)=>{s.d(t,{_P:()=>r});const a=e=>{if(!e)return!1;return/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/.test(e)},r=(e,t)=>{if(!a(e)||!a(t))return null;const[s,r]=e.split(":").map(Number),[l,i]=t.split(":").map(Number);let o=l-s,n=i-r;return n<0&&(o--,n+=60),o<0&&(o+=24),parseFloat((o+n/60).toFixed(2))}},5967:(e,t,s)=>{s.d(t,{Vq:()=>j,cx:()=>f,pr:()=>O,zt:()=>w,zh:()=>g,nZ:()=>k,mO:()=>S});var a=s(2555),r=s(5043),l=s(4858),i=s(2136),o=s(3059),n=s(9489),c=s(4111),d=s(3104),m=s(2376),u=s(579);const p=e=>{let{children:t,onSubmit:s,readOnly:p=!1,draftData:x=null}=e;const{t:b}=(0,i.ok)(),{formData:g,updateFormData:h,saveJobTicketAsDraft:j,submitJobTicket:y,isSubmitting:k,submitError:v,submitSuccess:f}=(0,o.yS)(),{user:T}=(0,n.As)(),w=(0,r.useMemo)((()=>x||g||{}),[x,g]),{register:N,handleSubmit:S,control:C,setValue:O,watch:D,formState:{errors:E}}=(0,l.mN)({defaultValues:w,mode:"onChange"}),A=D("workStartTime"),M=D("workEndTime"),F=D("driveStartTime"),P=D("driveEndTime"),q=(0,m.d7)(A,300),V=(0,m.d7)(M,300),z=(0,m.d7)(F,300),$=(0,m.d7)(P,300),I=(0,r.useCallback)((()=>q&&V?(0,c._P)(q,V):null),[q,V]),H=(0,r.useCallback)((()=>z&&$?(0,c._P)(z,$):null),[z,$]);(0,r.useEffect)((()=>{const e=I();null!==e&&O("workTotalHours",e)}),[I,O]),(0,r.useEffect)((()=>{const e=H();null!==e&&O("driveTotalHours",e)}),[H,O]),(0,r.useEffect)((()=>{const e=D(((e,t)=>{let{name:s,type:a}=t;if("change"===a&&s){const t=setTimeout((()=>{h(s,e[s])}),500);return()=>clearTimeout(t)}}));return()=>e.unsubscribe()}),[D,h]);const[L,B]=(0,r.useState)(!1),[J,Z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{f&&(B(!0),setTimeout((()=>B(!1)),5e3))}),[f]),(0,r.useEffect)((()=>{v&&(Z(!0),setTimeout((()=>Z(!1)),5e3))}),[v]);const R=(0,r.useCallback)((async e=>{try{const t=j(e);if(s)return void await s(t);await y(t)}catch(t){console.error("Error submitting job ticket:",t)}}),[s,j,y]);(0,r.useEffect)((()=>{null!==T&&void 0!==T&&T.name&&!D("submittedBy")&&O("submittedBy",T.name)}),[T,O,D]);const U=(0,r.useMemo)((()=>performance.now()),[]);return(0,r.useEffect)((()=>{const e=performance.now()-U;return console.log("BaseJobTicketForm rendered in ".concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("base-job-ticket-form-render")}}),[U]),(0,u.jsxs)(d.lV,{onSubmit:S(R),className:"space-y-8 max-w-3xl mx-auto",children:[(0,u.jsx)(d.pd,{label:b("jobTicket.date"),type:"date",id:"jobDate",name:"jobDate",register:N,rules:{required:!0},error:E.jobDate,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.companyName"),type:"text",id:"companyName",name:"companyName",register:N,rules:{required:!0},error:E.companyName,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.customerName"),type:"text",id:"customerName",name:"customerName",register:N,error:E.customerName,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.location"),type:"text",id:"location",name:"location",register:N,error:E.location,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.workType"),type:"text",id:"workType",name:"workType",register:N,error:E.workType,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.equipment"),type:"text",id:"equipment",name:"equipment",register:N,error:E.equipment,readOnly:p}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsx)(d.pd,{label:b("jobTicket.workStartTime"),type:"time",id:"workStartTime",name:"workStartTime",register:N,error:E.workStartTime,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.workEndTime"),type:"time",id:"workEndTime",name:"workEndTime",register:N,error:E.workEndTime,readOnly:p}),(0,u.jsxs)("div",{className:"md:col-span-3",children:[(0,u.jsx)("label",{htmlFor:"workDescription",className:"block text-sm font-medium text-gray-300",children:b("jobTicket.workDescription")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"workDescription",name:"workDescription",rows:4,className:"bg-gray-800 block w-full max-w-2xl rounded-md border border-gray-500 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:"Enter your work description here...",readOnly:p},N("workDescription")))})]}),(0,u.jsx)(d.pd,{label:b("jobTicket.workTotalTime"),type:"text",id:"workTotalHours",name:"workTotalHours",register:N,readOnly:!0})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsx)(d.pd,{label:b("jobTicket.travelStartTime"),type:"time",id:"driveStartTime",name:"driveStartTime",register:N,error:E.driveStartTime,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.travelEndTime"),type:"time",id:"driveEndTime",name:"driveEndTime",register:N,error:E.driveEndTime,readOnly:p}),(0,u.jsx)(d.pd,{label:b("jobTicket.travelTotalTime"),type:"text",id:"driveTotalHours",name:"driveTotalHours",register:N,readOnly:!0})]}),(0,u.jsx)(d.pd,{label:b("jobTicket.submittedBy"),type:"text",id:"submittedBy",name:"submittedBy",register:N,error:E.submittedBy,readOnly:p}),t,L&&(0,u.jsxs)(d.Zp,{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:[(0,u.jsxs)("strong",{className:"font-bold",children:[b("common.success"),"!"]}),(0,u.jsxs)("span",{className:"block sm:inline",children:[" ",b("jobTicket.submitted")]})]}),J&&(0,u.jsxs)(d.Zp,{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[(0,u.jsxs)("strong",{className:"font-bold",children:[b("common.error"),"!"]}),(0,u.jsxs)("span",{className:"block sm:inline",children:[" ",b("jobTicket.submitError")]})]}),!p&&(0,u.jsx)("div",{className:"pt-5",children:(0,u.jsx)("div",{className:"flex justify-center sm:justify-end",children:(0,u.jsx)(d.$n,{type:"submit",disabled:k,variant:k?"disabled":"success",size:"lg",children:k?(0,u.jsxs)("div",{className:"flex items-center",children:[b("jobTicket.submitting"),(0,u.jsx)(d.kt,{size:"sm",className:"ml-2"})]}):"Submit Job Ticket!"})})})]})},x=r.memo(p),b=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:p}=(0,l.mN)({defaultValues:s||{}}),[b,g]=(0,r.useState)(""),h=(0,r.useMemo)((()=>[{value:"partLubricant",label:o("parts.lubricant")},{value:"partPumpSeal",label:o("parts.pumpSeal")},{value:"partThrustChamber",label:o("parts.thrustChamber")},{value:"partVFDBreaker",label:o("parts.vfdBreaker")},{value:"partServiceKit",label:o("parts.serviceKit")},{value:"partOther",label:o("parts.other")}]),[o]),j=(0,r.useCallback)((()=>{if(!b)return;const e=h.find((e=>e.value===b));if(!e)return;const t=m("parts")||[];p("parts",[...t,{value:b,label:e.label}]),g("")}),[b,h,m,p]),y=(0,r.useCallback)((e=>{const t=[...m("parts")||[]];t.splice(e,1),p("parts",t)}),[m,p]),k=(0,r.useCallback)((e=>{const t=e.target.value,s=h.find((e=>e.value===t));g(s?t:"")}),[h]),v=(0,r.useMemo)((()=>{const e=m("parts")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noParts")}):e.map(((e,s)=>{let a;if("object"===typeof e&&e.label)a=e.label;else if("string"===typeof e){const t=e.replace(/^part/,"").charAt(0).toLowerCase()+e.replace(/^part/,"").slice(1);a=o("parts.".concat(t))}else a=String(e);return(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsx)("span",{children:a}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>y(s),children:o("common.remove")})]},s)}))}),[m,o,t,y]);return(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"installation",children:o("workTypes.installation")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")})]}))})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.equipment"),type:"text",id:"equipment",name:"equipment",register:c,placeholder:o("jobTicket.equipmentPlaceholder"),readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.partsUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsxs)("select",{value:b,onChange:k,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),h.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!b,children:o("jobTicket.addPart")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"parts",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:v})}})})]})]})},g=r.memo(b),h=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{register:n,formState:{errors:c}}=(0,l.mN)({defaultValues:s||{}}),m=(0,r.useMemo)((()=>[{value:"",label:o("common.select")},{value:"truck",label:o("vehicleTypes.truck")||"Truck"},{value:"van",label:o("vehicleTypes.van")||"Van"},{value:"car",label:o("vehicleTypes.car")||"Car"}]),[o]),p=(0,r.useMemo)((()=>performance.now()),[]);return r.useEffect((()=>{const e=performance.now()-p;return console.log("DriverTicketForm rendered in ".concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("driver-ticket-form-render")}}),[p]),(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"vehicleType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.vehicleType")||"Vehicle Type"}),(0,u.jsxs)("div",{className:"mt-1",children:[(0,u.jsx)("select",(0,a.A)((0,a.A)({id:"vehicleType",name:"vehicleType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},n("vehicleType",{required:!0})),{},{children:m.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})),c.vehicleType&&(0,u.jsx)("p",{className:"mt-1 text-sm text-red-500",children:o("validation.required")})]})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.mileage")||"Mileage",type:"number",id:"mileage",name:"mileage",register:n,rules:{required:!0,min:0},error:c.mileage,placeholder:o("jobTicket.mileagePlaceholder")||"Enter total miles driven",readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"tripType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.tripType")||"Trip Type"}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"tripType",name:"tripType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},n("tripType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"local",children:o("tripTypes.local")||"Local"}),(0,u.jsx)("option",{value:"longHaul",children:o("tripTypes.longHaul")||"Long Haul"})]}))})]})]})},j=r.memo(h),y=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:p}=(0,l.mN)({defaultValues:s||{}}),[b,g]=(0,r.useState)(""),h=(0,r.useMemo)((()=>[{value:o("materials.pipe"),label:o("materials.pipe")},{value:o("materials.fittings"),label:o("materials.fittings")},{value:o("materials.valves"),label:o("materials.valves")},{value:o("materials.tools"),label:o("materials.tools")},{value:o("materials.safety"),label:o("materials.safety")},{value:o("materials.other"),label:o("materials.other")}]),[o]),j=(0,r.useCallback)((()=>{if(!b)return;const e=m("materials")||[];p("materials",[...e,b]),g("")}),[b,m,p]),y=(0,r.useCallback)((e=>{const t=[...m("materials")||[]];t.splice(e,1),p("materials",t)}),[m,p]),k=(0,r.useCallback)((e=>{g(e.target.value)}),[]),v=(0,r.useMemo)((()=>{const e=m("materials")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noMaterials")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsx)("span",{children:e}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>y(s),children:o("common.remove")})]},s)))}),[m,o,t,y]);return(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"construction",children:o("workTypes.construction")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"pipeline",children:o("workTypes.pipeline")}),(0,u.jsx)("option",{value:"wellService",children:o("workTypes.wellService")})]}))})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.equipmentUsed"),type:"text",id:"equipmentUsed",name:"equipmentUsed",register:c,placeholder:o("jobTicket.equipmentUsedPlaceholder"),readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.materialsUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsxs)("select",{value:b,onChange:k,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),h.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!b,children:o("common.add")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"materials",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:v})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"siteConditions",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.siteConditions")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"siteConditions",name:"siteConditions",rows:3,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:o("jobTicket.siteConditionsPlaceholder")},c("siteConditions")))})]})]})},k=r.memo(y),v=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:p}=(0,l.mN)({defaultValues:s||{}}),[b,g]=(0,r.useState)(""),h=(0,r.useMemo)((()=>[{value:o("components.wiring"),label:o("components.wiring")},{value:o("components.breakers"),label:o("components.breakers")},{value:o("components.switches"),label:o("components.switches")},{value:o("components.panels"),label:o("components.panels")},{value:o("components.motors"),label:o("components.motors")},{value:o("components.other"),label:o("components.other")}]),[o]),j=(0,r.useCallback)((()=>{if(!b)return;const e=m("components")||[];p("components",[...e,b]),g("")}),[b,m,p]),y=(0,r.useCallback)((e=>{const t=[...m("components")||[]];t.splice(e,1),p("components",t)}),[m,p]),k=(0,r.useCallback)((e=>{g(e.target.value)}),[]),v=(0,r.useMemo)((()=>{const e=m("components")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noComponents")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsx)("span",{children:e}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>y(s),children:o("common.remove")})]},s)))}),[m,o,t,y]);return(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"installation",children:o("workTypes.installation")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")}),(0,u.jsx)("option",{value:"troubleshooting",children:o("workTypes.troubleshooting")})]}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.voltage"),type:"text",id:"voltage",name:"voltage",register:c,placeholder:"e.g., 120V, 240V, 480V",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.amperage"),type:"text",id:"amperage",name:"amperage",register:c,placeholder:"e.g., 15A, 20A, 30A",readOnly:t})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.componentsUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsxs)("select",{value:b,onChange:k,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),h.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!b,children:o("common.add")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"components",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:v})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"safetyMeasures",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.safetyMeasures")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"safetyMeasures",name:"safetyMeasures",rows:3,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:o("jobTicket.safetyMeasuresPlaceholder")},c("safetyMeasures")))})]})]})},f=r.memo(v),T=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:p}=(0,l.mN)({defaultValues:s||{}}),[b,g]=(0,r.useState)(""),[h,j]=(0,r.useState)("pass"),[y,k]=(0,r.useState)(""),v=(0,r.useCallback)((()=>{if(!b)return;const e=m("inspections")||[];p("inspections",[...e,{point:b,status:h,notes:y}]),g(""),j("pass"),k("")}),[b,h,y,m,p]),f=(0,r.useCallback)((e=>{const t=[...m("inspections")||[]];t.splice(e,1),p("inspections",t)}),[m,p]),T=(0,r.useMemo)((()=>{const e=m("inspections")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noInspections")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"bg-gray-700 rounded px-3 py-2",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"font-medium",children:e.point}),(0,u.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs ".concat("pass"===e.status?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),children:"pass"===e.status?o("jobTicket.pass"):o("jobTicket.fail")})]}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>f(s),children:o("common.remove")})]}),e.notes&&(0,u.jsx)("div",{className:"mt-1 text-sm text-gray-300",children:e.notes})]},s)))}),[m,o,t,f]);return(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"monitoring",children:o("workTypes.monitoring")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"emergency",children:o("workTypes.emergency")})]}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.pressureReading"),type:"text",id:"pressureReading",name:"pressureReading",register:c,placeholder:"e.g., 65 PSI",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.flowReading"),type:"text",id:"flowReading",name:"flowReading",register:c,placeholder:"e.g., 250 GPM",readOnly:t})]}),(0,u.jsx)(d.pd,{label:o("jobTicket.pipelineSection"),type:"text",id:"pipelineSection",name:"pipelineSection",register:c,placeholder:o("jobTicket.pipelineSectionPlaceholder"),readOnly:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.inspectionPoints")}),!t&&(0,u.jsxs)("div",{className:"space-y-3 mb-3 bg-gray-800 p-4 rounded-md",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"inspectionPoint",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.inspectionPoint")}),(0,u.jsx)("input",{type:"text",id:"inspectionPoint",value:b,onChange:e=>g(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.inspectionPointPlaceholder")})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"inspectionStatus",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.status")}),(0,u.jsxs)("select",{id:"inspectionStatus",value:h,onChange:e=>j(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,u.jsx)("option",{value:"pass",children:o("jobTicket.pass")}),(0,u.jsx)("option",{value:"fail",children:o("jobTicket.fail")})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"inspectionNotes",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.notes")}),(0,u.jsx)("textarea",{id:"inspectionNotes",value:y,onChange:e=>k(e.target.value),rows:2,className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.notesPlaceholder")})]}),(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:v,disabled:!b,children:o("common.add")})})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[300px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"inspections",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:T})}})})]})]})},w=r.memo(T),N=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:p}=(0,l.mN)({defaultValues:s||{}}),[b,g]=(0,r.useState)(""),[h,j]=(0,r.useState)(""),[y,k]=(0,r.useState)(""),v=(0,r.useCallback)((()=>{if(!b||!y)return;const e=m("loads")||[];p("loads",[...e,{description:b,weight:h,destination:y}]),g(""),j(""),k("")}),[b,h,y,m,p]),f=(0,r.useCallback)((e=>{const t=[...m("loads")||[]];t.splice(e,1),p("loads",t)}),[m,p]),T=(0,r.useMemo)((()=>{const e=m("loads")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noLoads")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"bg-gray-700 rounded px-3 py-2",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("div",{className:"font-medium",children:e.description}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>f(s),children:o("common.remove")})]}),(0,u.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-2 text-sm text-gray-300",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{className:"text-gray-400",children:[o("jobTicket.weight"),": "]}),e.weight||"N/A"]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{className:"text-gray-400",children:[o("jobTicket.destination"),": "]}),e.destination]})]})]},s)))}),[m,o,t,f]);return(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"delivery",children:o("workTypes.delivery")}),(0,u.jsx)("option",{value:"pickup",children:o("workTypes.pickup")}),(0,u.jsx)("option",{value:"transport",children:o("workTypes.transport")}),(0,u.jsx)("option",{value:"equipment",children:o("workTypes.equipment")}),(0,u.jsx)("option",{value:"supplies",children:o("workTypes.supplies")})]}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.vehicleId"),type:"text",id:"vehicleId",name:"vehicleId",register:c,placeholder:"e.g., TRK-2023-104",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.vehicleType"),type:"text",id:"vehicleType",name:"vehicleType",register:c,placeholder:"e.g., Semi-truck, Pickup, Tanker",readOnly:t})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsx)(d.pd,{label:o("jobTicket.startingMileage"),type:"number",id:"startingMileage",name:"startingMileage",register:c,placeholder:"e.g., 45780",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.endingMileage"),type:"number",id:"endingMileage",name:"endingMileage",register:c,placeholder:"e.g., 45920",readOnly:t}),(0,u.jsx)(d.pd,{label:o("jobTicket.totalMileage"),type:"number",id:"totalMileage",name:"totalMileage",register:c,readOnly:!0,value:m("endingMileage")&&m("startingMileage")?Math.max(0,Number(m("endingMileage"))-Number(m("startingMileage"))):""})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.loadDetails")}),!t&&(0,u.jsxs)("div",{className:"space-y-3 mb-3 bg-gray-800 p-4 rounded-md",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"loadDescription",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.loadDescription")}),(0,u.jsx)("input",{type:"text",id:"loadDescription",value:b,onChange:e=>g(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.loadDescriptionPlaceholder")})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"loadWeight",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.weight")}),(0,u.jsx)("input",{type:"text",id:"loadWeight",value:h,onChange:e=>j(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:"e.g., 2500 lbs"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"loadDestination",className:"block text-xs font-medium text-gray-400",children:o("jobTicket.destination")}),(0,u.jsx)("input",{type:"text",id:"loadDestination",value:y,onChange:e=>k(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.destinationPlaceholder")})]})]}),(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:v,disabled:!b||!y,children:o("common.add")})})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[300px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"loads",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:T})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.vehicleInspection")}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionFuel",name:"inspectionFuel",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionFuel")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionFuel",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.fuelChecked")})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionTires",name:"inspectionTires",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionTires")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionTires",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.tiresChecked")})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionOil",name:"inspectionOil",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionOil")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionOil",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.oilChecked")})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",(0,a.A)((0,a.A)({id:"inspectionLights",name:"inspectionLights",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionLights")),{},{disabled:t})),(0,u.jsx)("label",{htmlFor:"inspectionLights",className:"ml-2 block text-sm text-gray-300",children:o("jobTicket.lightsChecked")})]})]})]})]})},S=r.memo(N),C=e=>{let{readOnly:t=!1,draftData:s=null}=e;const{t:o}=(0,i.ok)(),{control:n,register:c,watch:m,setValue:p}=(0,l.mN)({defaultValues:s||{}}),[b,g]=(0,r.useState)(""),[h,j]=(0,r.useState)(""),y=(0,r.useCallback)((()=>{if(!b)return;const e=m("items")||[];p("items",[...e,{name:b,quantity:h||"1"}]),g(""),j("")}),[b,h,m,p]),k=(0,r.useCallback)((e=>{const t=[...m("items")||[]];t.splice(e,1),p("items",t)}),[m,p]),v=(0,r.useMemo)((()=>{const e=m("items")||[];return 0===e.length?(0,u.jsx)("li",{className:"text-gray-500 text-center py-2",children:o("jobTicket.noItems")}):e.map(((e,s)=>(0,u.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,u.jsxs)("span",{children:[e.name,e.quantity&&"1"!==e.quantity&&(0,u.jsxs)("span",{className:"ml-2 text-sm text-gray-400",children:["(",o("jobTicket.quantity"),": ",e.quantity,")"]})]}),!t&&(0,u.jsx)(d.$n,{variant:"danger",size:"sm",onClick:()=>k(s),children:o("common.remove")})]},s)))}),[m,o,t,k]);return(0,u.jsxs)(x,{readOnly:t,draftData:s,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"customJobType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.customJobType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("input",(0,a.A)({type:"text",id:"customJobType",name:"customJobType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t,placeholder:o("jobTicket.customJobTypePlaceholder")},c("customJobType")))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.workType")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsxs)("select",(0,a.A)((0,a.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,u.jsx)("option",{value:"",children:o("common.select")}),(0,u.jsx)("option",{value:"maintenance",children:o("workTypes.maintenance")}),(0,u.jsx)("option",{value:"repair",children:o("workTypes.repair")}),(0,u.jsx)("option",{value:"installation",children:o("workTypes.installation")}),(0,u.jsx)("option",{value:"inspection",children:o("workTypes.inspection")}),(0,u.jsx)("option",{value:"other",children:o("workTypes.other")})]}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:o("jobTicket.materialsEquipmentUsed")}),!t&&(0,u.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsx)("input",{type:"text",value:b,onChange:e=>g(e.target.value),className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.itemNamePlaceholder")})}),(0,u.jsx)("div",{className:"w-24",children:(0,u.jsx)("input",{type:"text",value:h,onChange:e=>j(e.target.value),className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:o("jobTicket.qty")})}),(0,u.jsx)(d.$n,{type:"button",variant:"primary",size:"md",onClick:y,disabled:!b,children:o("common.add")})]}),(0,u.jsx)(d.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,u.jsx)(l.xI,{name:"items",control:n,defaultValue:[],render:e=>{let{field:t}=e;return(0,u.jsx)("ul",{className:"space-y-2",children:v})}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"additionalNotes",className:"block text-sm font-medium text-gray-300",children:o("jobTicket.additionalNotes")}),(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("textarea",(0,a.A)({id:"additionalNotes",name:"additionalNotes",rows:4,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:o("jobTicket.additionalNotesPlaceholder")},c("additionalNotes")))})]})]})},O=r.memo(C)},6782:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(2555),r=s(5043),l=s(4858),i=s(2136),o=s(3059),n=s(4111),c=s(3104),d=s(2376),m=s(579);const u=e=>{var t,s;let{readOnly:u=!1,draftData:p=null}=e;const{t:x}=(0,i.ok)(),{formData:b,updateFormData:g,saveJobTicketAsDraft:h}=(0,o.yS)(),[j,y]=(0,r.useState)(""),{register:k,handleSubmit:v,control:f,setValue:T,watch:w,formState:{errors:N}}=(0,l.mN)({defaultValues:p||b,mode:"onChange"}),S=w("workStartTime"),C=w("workEndTime"),O=w("driveStartTime"),D=w("driveEndTime"),E=(0,d.d7)(S,300),A=(0,d.d7)(C,300),M=(0,d.d7)(O,300),F=(0,d.d7)(D,300);(0,r.useEffect)((()=>{if(E&&A){const e=(0,n._P)(E,A);null!==e&&T("workTotalHours",e)}}),[E,A,T]),(0,r.useEffect)((()=>{if(M&&F){const e=(0,n._P)(M,F);null!==e&&T("driveTotalHours",e)}}),[M,F,T]),(0,r.useEffect)((()=>{const e=w(((e,t)=>{let{name:s,type:a}=t;"change"===a&&s&&g(s,e[s])}));return()=>e.unsubscribe()}),[w,g]);const P=(0,r.useMemo)((()=>[{value:x("partLubricant"),label:x("partLubricant")},{value:x("partPumpSeal"),label:x("partPumpSeal")},{value:x("partThrustChamber"),label:x("partThrustChamber")},{value:x("partVFDBreaker"),label:x("partVFDBreaker")},{value:x("partServiceKit"),label:x("partServiceKit")},{value:x("partOther"),label:x("partOther")}]),[x]),q=(0,r.useCallback)((()=>{if(!j)return;const e=w("parts")||[];T("parts",[...e,j]),y("")}),[j,w,T]),V=(0,r.useCallback)((e=>{const t=[...w("parts")||[]];t.splice(e,1),T("parts",t)}),[w,T]),{submitJobTicket:z,isSubmitting:$,submitError:I,submitSuccess:H}=(0,o.yS)(),[L,B]=(0,r.useState)(!1),[J,Z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(H){B(!0);const e=setTimeout((()=>B(!1)),5e3);return()=>clearTimeout(e)}}),[H]),(0,r.useEffect)((()=>{if(I){Z(!0);const e=setTimeout((()=>Z(!1)),5e3);return()=>clearTimeout(e)}}),[I]);const R=(0,d.DW)((async e=>{try{const t=h(e);await z(t)}catch(t){console.error("Error submitting job ticket:",t)}}));return(0,m.jsx)(c.lV,{onSubmit:v(R),className:"space-y-6 max-w-3xl mx-auto",children:(0,m.jsxs)(c.Zp,{className:"p-6",children:[L&&(0,m.jsx)("div",{className:"mb-4 p-4 bg-green-900 bg-opacity-20 border border-green-700 rounded-md",children:(0,m.jsx)("p",{className:"text-green-400",children:x("jobTicket.submitSuccess")})}),J&&(0,m.jsx)("div",{className:"mb-4 p-4 bg-red-900 bg-opacity-20 border border-red-700 rounded-md",children:(0,m.jsx)("p",{className:"text-red-400",children:I})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsx)(c.pd,{type:"date",id:"jobDate",name:"jobDate",label:x("jobTicket.date"),register:k,rules:{required:!0},error:N.jobDate,errorText:x("errors.required"),readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"companyName",name:"companyName",label:x("jobTicket.companyName"),register:k,rules:{required:!0},error:N.companyName,errorText:x("errors.required"),readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"customerName",name:"customerName",label:x("jobTicket.customerName"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"location",name:"location",label:x("jobTicket.location"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"workType",name:"workType",label:x("jobTicket.workType")||"Work Type",register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"text",id:"equipment",name:"equipment",label:x("jobTicket.equipment")||"Equipment Serviced",register:k,readOnly:u})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:x("jobTicket.workTotalTime")}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)(c.pd,{type:"time",id:"workStartTime",name:"workStartTime",label:x("jobTicket.workStartTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"time",id:"workEndTime",name:"workEndTime",label:x("jobTicket.workEndTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"number",id:"workTotalHours",name:"workTotalHours",label:x("jobTicket.workTotalTime"),register:k,readOnly:!0,step:"0.01"})]})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:x("jobTicket.travelTotalTime")}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsx)(c.pd,{type:"time",id:"driveStartTime",name:"driveStartTime",label:x("jobTicket.travelStartTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"time",id:"driveEndTime",name:"driveEndTime",label:x("jobTicket.travelEndTime"),register:k,readOnly:u}),(0,m.jsx)(c.pd,{type:"number",id:"driveTotalHours",name:"driveTotalHours",label:x("jobTicket.travelTotalTime"),register:k,readOnly:!0,step:"0.01"})]})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:x("jobTicket.parts.title")}),!u&&(0,m.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,m.jsxs)("select",{className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:j,onChange:e=>y(e.target.value),children:[(0,m.jsx)("option",{value:"",children:x("selectPartsPlaceholder")}),P.map((e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,m.jsx)(c.$n,{type:"button",onClick:q,disabled:!j,variant:"secondary",children:x("addPart")})]}),(0,m.jsx)("div",{className:"bg-gray-800 rounded-md border border-gray-700 p-4",children:(null===(t=w("parts"))||void 0===t?void 0:t.length)>0?(0,m.jsx)("ul",{className:"divide-y divide-gray-700",children:null===(s=w("parts"))||void 0===s?void 0:s.map(((e,t)=>(0,m.jsxs)("li",{className:"py-2 flex justify-between items-center",children:[(0,m.jsx)("span",{children:e}),!u&&(0,m.jsx)(c.$n,{type:"button",onClick:()=>V(t),variant:"danger",size:"sm",children:x("removePart")})]},t)))}):(0,m.jsx)("p",{className:"text-gray-400",children:x("noParts","No parts added")})})]}),(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("label",{htmlFor:"workDescription",className:"block text-sm font-medium text-gray-300",children:x("jobTicket.workDescription")}),(0,m.jsx)("div",{className:"mt-1",children:(0,m.jsx)("textarea",(0,a.A)((0,a.A)({id:"workDescription",name:"workDescription",className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",rows:4,placeholder:x("jobTicket.workDescription")},k("workDescription")),{},{readOnly:u}))})]}),!u&&(0,m.jsx)("div",{className:"mt-8 flex justify-end",children:(0,m.jsx)(c.$n,{type:"submit",disabled:$,className:"w-full md:w-auto",children:x($?"submitting":"submit")})})]})})},p=r.memo(u)},9265:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(3986),r=s(5043);const l=["title","titleId"];const i=r.forwardRef((function(e,t){let{title:s,titleId:i}=e,o=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},o),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}))}}]);
//# sourceMappingURL=418.cf2284a4.chunk.js.map
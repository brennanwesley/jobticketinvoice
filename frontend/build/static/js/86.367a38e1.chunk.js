"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[86],{1086:(e,t,a)=>{a.d(t,{Vq:()=>q,cx:()=>E,T4:()=>O,pr:()=>L,zt:()=>I,zh:()=>F,nZ:()=>V,mO:()=>B});var s=a(2555),r=a(5043),l=a(4858),i=a(3216),n=a(2136),o=a(3059),c=a(8729);const d=e=>{if(!e)return!1;return/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/.test(e)},m=(e,t)=>{if(!d(e)||!d(t))return null;const[a,s]=e.split(":").map(Number),[r,l]=t.split(":").map(Number);let i=r-a,n=l-s;return n<0&&(i--,n+=60),i<0&&(i+=24),parseFloat((i+n/60).toFixed(2))};var u=a(3526),x=a(3986),p=a(579);const b=["id","name","type","label","placeholder","required","disabled","readOnly","error","register","className"],h=e=>{let{id:t,name:a,type:r="text",label:l,placeholder:i,required:n=!1,disabled:o=!1,readOnly:c=!1,error:d,register:m,className:u=""}=e,h=(0,x.A)(e,b);return(0,p.jsxs)("div",{className:"mb-4",children:[l&&(0,p.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-white mb-1",children:[l,n&&(0,p.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,p.jsx)("div",{className:"relative",children:(0,p.jsx)("input",(0,s.A)((0,s.A)({id:t,name:a,type:r,className:"\n            bg-gray-800 \n            block \n            w-full \n            rounded-md \n            border-2 \n            border-orange-400 \n            text-white \n            shadow-sm \n            focus:border-orange-500 \n            focus:ring-orange-500 \n            sm:text-sm\n            ".concat(d?"border-red-500":"","\n            ").concat(u,"\n          "),placeholder:i,disabled:o,readOnly:c,autoComplete:"off"},m&&m(a)),h))}),d&&(0,p.jsx)("p",{className:"mt-1 text-xs text-red-500",children:d})]})},g=["id","name","label","required","disabled","readOnly","error","register","children","className"],j=e=>{let{id:t,name:a,label:r,required:l=!1,disabled:i=!1,readOnly:n=!1,error:o,register:c,children:d,className:m=""}=e,u=(0,x.A)(e,g);return(0,p.jsxs)("div",{className:"mb-4",children:[r&&(0,p.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-white mb-1",children:[r,l&&(0,p.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,p.jsx)("div",{className:"relative",children:(0,p.jsx)("select",(0,s.A)((0,s.A)((0,s.A)({id:t,name:a,className:"\n            bg-gray-800 \n            block \n            w-full \n            rounded-md \n            border-2 \n            border-orange-400 \n            text-white \n            shadow-sm \n            focus:border-orange-500 \n            focus:ring-orange-500 \n            sm:text-sm\n            ".concat(o?"border-red-500":"","\n            ").concat(m,"\n          "),disabled:i,autoComplete:"off"},c&&c(a)),u),{},{children:d}))}),o&&(0,p.jsx)("p",{className:"mt-1 text-xs text-red-500",children:o})]})};var y=a(7988);const k=["id","name","label","placeholder","required","disabled","readOnly","error","value","onChange","onBlur","onFocus","suffix","className"],v=["id","name","label","required","disabled","readOnly","error","register","setValue","onChange"],f=e=>{let{id:t,name:a,label:r,placeholder:l,required:i=!1,disabled:n=!1,readOnly:o=!1,error:c,value:d,onChange:m,onBlur:u,onFocus:b,suffix:h,className:g=""}=e,j=(0,x.A)(e,k);return(0,p.jsxs)("div",{children:[r&&(0,p.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-white mb-1",children:[r,i&&(0,p.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,p.jsxs)("div",{className:"relative mt-1",children:[(0,p.jsx)("input",(0,s.A)({id:t,name:a,type:"text",className:"bg-gray-800 block w-full rounded-md border-2 border-orange-400 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm ".concat(g," ").concat(c?"border-red-500":""),placeholder:l,disabled:n,readOnly:o,value:d||"",onChange:m,onBlur:u,onFocus:b,autoComplete:"off"},j)),h&&(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:h})]}),c&&(0,p.jsx)("p",{className:"mt-1 text-xs text-red-500",children:c})]})},w=e=>{let{id:t,name:a,label:l,required:i=!1,disabled:o=!1,readOnly:c=!1,error:d,register:m,setValue:u,onChange:b}=e,h=(0,x.A)(e,v);const{t:g}=(0,n.ok)(),[j,k]=(0,r.useState)(!1),[w,T]=(0,r.useState)(""),[N,C]=(0,r.useState)(""),S=(0,r.useRef)(null),O=((0,r.useRef)(null),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent));(0,r.useEffect)((()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const A=(0,p.jsx)("div",{className:"cursor-pointer",onClick:()=>{o||c||k(!j)},"aria-label":"Open date picker",children:(0,p.jsx)(y.A,{className:"h-5 w-5 text-gray-400"})});return O?(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsxs)("label",{htmlFor:t,className:"block text-sm font-medium text-white mb-1",children:[l,i&&(0,p.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,p.jsxs)("div",{className:"mt-1 relative",children:[(0,p.jsx)("input",(0,s.A)((0,s.A)({id:t,name:a,type:"date",className:"bg-gray-800 block w-full rounded-md border-2 border-orange-400 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm ".concat(d?"border-red-500":""),disabled:o,readOnly:c,autoComplete:"off",onChange:e=>{const t=e.target.value;if(t){const[e,s,r]=t.split("-"),l="2025-".concat(s,"-").concat(r);u&&u(a,l,{shouldValidate:!0}),T(l);const i="".concat(s,"/").concat(r,"/2025");if(C(i),b){b({target:{name:a,value:l}})}}}},m&&m(a)),h)),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:A})]}),d&&(0,p.jsx)("p",{className:"mt-1 text-xs text-red-500",children:d})]}):(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(f,(0,s.A)((0,s.A)({id:t,name:a,label:l,required:i,disabled:o,readOnly:c,error:d,value:N,onChange:e=>{const t=e.target.value;if(C(t),t&&t.length>=8){const e=t.split("/");if(3===e.length){const t=e[0].padStart(2,"0"),s=e[1].padStart(2,"0");let r=e[2];r="2025";const l="".concat(r,"-").concat(t,"-").concat(s);T(l),u&&u(a,l,{shouldValidate:!0})}}},suffix:A,placeholder:"MM/DD/YYYY"},m&&(0,s.A)({},m(a))),h)),j&&(0,p.jsxs)("div",{ref:S,className:"absolute z-10 mt-1 bg-gray-800 border border-gray-700 rounded-md shadow-lg p-4",children:[(0,p.jsx)("div",{className:"text-white text-sm mb-2",children:g("jobTicket.selectDate")||"Select a date"}),(0,p.jsx)("input",{type:"date",className:"bg-gray-800 text-white border border-gray-700 rounded-md p-2",onChange:e=>{const t=e.target.value;if(T(t),k(!1),t){const[e,a,s]=t.split("-"),r="".concat(a,"/").concat(s,"/").concat(e);C(r)}if(u&&u(a,t,{shouldValidate:!0}),b){b({target:{name:a,value:t}})}},min:"2025-01-01",max:"2025-12-31",defaultValue:"2025-06-08"})]})]})};var T=a(2376);const N=e=>{let{children:t,onSubmit:a,readOnly:d=!1,draftData:x=null}=e;const{t:b}=(0,n.ok)(),{formData:g,updateFormData:j,saveJobTicketAsDraft:y,submitJobTicket:k,isSubmitting:v,submitError:f,submitSuccess:N}=(0,o.yS)(),{user:C}=(0,c.As)(),S=(0,r.useMemo)((()=>x||g||{}),[x,g]),O=(0,i.Zp)(),{register:A,handleSubmit:F,control:D,setValue:q,watch:M,reset:V,formState:{errors:P}}=(0,l.mN)({defaultValues:S,mode:"onChange"}),E=(0,r.useCallback)((()=>{V(),j({})}),[V,j]),z=M("workStartTime"),I=M("workEndTime"),$=M("driveStartTime"),B=M("driveEndTime"),R=(0,T.d7)(z,300),L=(0,T.d7)(I,300),Z=(0,T.d7)($,300),J=(0,T.d7)(B,300),H=(0,r.useCallback)((()=>R&&L?m(R,L):null),[R,L]),U=(0,r.useCallback)((()=>Z&&J?m(Z,J):null),[Z,J]);(0,r.useEffect)((()=>{const e=H();null!==e&&q("workTotalHours",e)}),[H,q]),(0,r.useEffect)((()=>{const e=U();null!==e&&q("driveTotalHours",e)}),[U,q]),(0,r.useEffect)((()=>{const e=M(((e,t)=>{let{name:a,type:s}=t;if("change"===s&&a){const t=setTimeout((()=>{j(a,e[a])}),500);return()=>clearTimeout(t)}}));return()=>e.unsubscribe()}),[M,j]);const[K,Y]=(0,r.useState)(!1),[W,_]=(0,r.useState)(!1),[G,Q]=(0,r.useState)(""),[X,ee]=(0,r.useState)(0),[te,ae]=(0,r.useState)(!1);(0,r.useEffect)((()=>{N&&(Y(!0),setTimeout((()=>Y(!1)),5e3))}),[N]),(0,r.useEffect)((()=>{f&&(_(!0),setTimeout((()=>_(!1)),5e3))}),[f]);(0,r.useEffect)((()=>{null!==C&&void 0!==C&&C.name&&!M("submittedBy")&&q("submittedBy",C.name)}),[C,q,M]);const se=(0,r.useMemo)((()=>performance.now()),[]);return(0,r.useEffect)((()=>{const e=performance.now()-se;return console.log("BaseJobTicketForm rendered in ".concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("base-job-ticket-form-render")}}),[se]),(0,p.jsxs)(u.lV,{onSubmit:F((async e=>{ae(!0),Y(!1),_(!1),Q("");try{const t=await k(e,ee);if(t.success){const a=(0,s.A)((0,s.A)({},e),{},{status:"submitted",id:t.id||e.id||"ticket-".concat(Date.now())});y(a),Y(!0),E(),setTimeout((()=>{O("/ticket-submitted",{state:{ticketNumber:t.ticketNumber,message:t.message}})}),1500)}else _(!0),Q(t.message||"Failed to submit job ticket"),console.error("Submission failed:",t.error)}catch(t){_(!0),Q(t.message||"An unexpected error occurred"),console.error("Error in form submission:",t)}finally{ae(!1),ee(0)}})),className:"space-y-8 max-w-3xl mx-auto",autoComplete:"off",hideSubmitButton:!0,children:[(0,p.jsx)(w,{label:b("jobTicket.date"),id:"jobDate",name:"jobDate",register:A,setValue:q,rules:{required:!0},error:P.jobDate?b("validation.required"):void 0,readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.companyName"),type:"text",id:"companyName",name:"companyName",register:A,required:!0,error:P.companyName&&b("jobTicket.validation.companyRequired"),readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.customerName"),type:"text",id:"customerName",name:"customerName",register:A,error:P.customerName,readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.location"),type:"text",id:"location",name:"location",register:A,required:!0,error:P.location&&b("jobTicket.validation.locationRequired"),readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.equipment"),type:"text",id:"equipment",name:"equipment",register:A,error:P.equipment,readOnly:d}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("label",{htmlFor:"workDescription",className:"block text-sm font-medium text-white mb-1",children:[b("jobTicket.workDescription"),(0,p.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("textarea",(0,s.A)({id:"workDescription",name:"workDescription",rows:4,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-2 border-orange-400 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:"Enter your work description here...",readOnly:d},A("workDescription",{required:!0})))}),P.workDescription&&(0,p.jsx)("p",{className:"mt-1 text-xs text-red-500",children:b("jobTicket.validation.workDescriptionRequired")})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,p.jsx)(h,{label:b("jobTicket.workStartTime"),type:"time",id:"workStartTime",name:"workStartTime",register:A,error:P.workStartTime&&b("jobTicket.validation.timeFormatInvalid"),readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.workEndTime"),type:"time",id:"workEndTime",name:"workEndTime",register:A,error:P.workEndTime&&b("jobTicket.validation.timeFormatInvalid"),readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.workTotalTime"),type:"text",id:"workTotalHours",name:"workTotalHours",register:A,readOnly:!0})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,p.jsx)(h,{label:b("jobTicket.travelStartTime"),type:"time",id:"driveStartTime",name:"driveStartTime",register:A,error:P.driveStartTime&&b("jobTicket.validation.timeFormatInvalid"),readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.travelEndTime"),type:"time",id:"driveEndTime",name:"driveEndTime",register:A,error:P.driveEndTime&&b("jobTicket.validation.timeFormatInvalid"),readOnly:d}),(0,p.jsx)(h,{label:b("jobTicket.travelTotalTime"),type:"text",id:"driveTotalHours",name:"driveTotalHours",register:A,readOnly:!0})]}),t,(0,p.jsx)("div",{className:"mt-6 mb-4",children:(0,p.jsx)(h,{label:"Customer Signature",type:"text",id:"submittedBy",name:"submittedBy",register:A,error:P.submittedBy,readOnly:d})}),K&&(0,p.jsxs)(u.Zp,{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:[(0,p.jsxs)("strong",{className:"font-bold",children:[b("common.success"),"!"]}),(0,p.jsxs)("span",{className:"block sm:inline",children:[" ",b("jobTicket.submitted")]})]}),W&&(0,p.jsxs)(u.Zp,{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[(0,p.jsxs)("strong",{className:"font-bold",children:[b("common.error"),"!"]}),(0,p.jsxs)("span",{className:"block sm:inline",children:[" ",G||b("jobTicket.submitError")]})]}),!d&&(0,p.jsx)("div",{className:"pt-5",children:(0,p.jsx)("div",{className:"flex justify-center sm:justify-end",children:(0,p.jsx)(u.$n,{type:"submit",disabled:te,variant:te?"disabled":"success",size:"lg",children:te?(0,p.jsxs)("div",{className:"flex items-center",children:[b("jobTicket.submitting"),(0,p.jsx)(u.kt,{size:"sm",className:"ml-2"})]}):"Submit Job Ticket!"})})})]})},C=r.memo(N),S=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{control:o,register:c,watch:d,setValue:m,formState:x}=(0,l.mN)({defaultValues:a||{parts:[]}}),[b,h]=(0,r.useState)(""),[g,j]=(0,r.useState)([]),y=(0,r.useMemo)((()=>[{value:"partLubricant",label:i("parts.lubricant")},{value:"partPumpSeal",label:i("parts.pumpSeal")},{value:"partThrustChamber",label:i("parts.thrustChamber")},{value:"partVFDBreaker",label:i("parts.vfdBreaker")},{value:"partServiceKit",label:i("parts.serviceKit")},{value:"partOther",label:i("parts.other")}]),[i]);(0,r.useEffect)((()=>{a&&a.parts&&j(a.parts)}),[a]);const k=(0,r.useCallback)((()=>{if(!b)return;const e=y.find((e=>e.value===b));if(!e)return;const t={value:b,label:e.label};j((e=>[...e,t]));const a=d("parts")||[];m("parts",[...a,t]),h(""),console.log("Part added:",t),console.log("Current parts array:",[...a,t])}),[b,y,d,m]),v=(0,r.useCallback)((e=>{j((t=>{const a=[...t];return a.splice(e,1),a}));const t=[...d("parts")||[]];t.splice(e,1),m("parts",t),console.log("Part removed at index:",e)}),[d,m]),f=(0,r.useCallback)((e=>{const t=e.target.value;h(t)}),[]),w=(0,r.useMemo)((()=>(console.log("Rendering parts list with:",g),g&&0!==g.length?g.map(((e,a)=>{let s;if("object"===typeof e&&e.label)s=e.label;else if("string"===typeof e){const t=e.replace(/^part/,"").charAt(0).toLowerCase()+e.replace(/^part/,"").slice(1);s=i("jobTicket.parts.".concat(t))}else s=String(e);return(0,p.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,p.jsx)("span",{className:"text-white",children:s}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>v(a),children:i("common.remove")})]},a)})):(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:i("jobTicket.parts.noParts")}))),[g,i,t,v]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.workType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-2 border-orange-400 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"maintenance",children:i("workTypes.maintenance")}),(0,p.jsx)("option",{value:"repair",children:i("workTypes.repair")}),(0,p.jsx)("option",{value:"installation",children:i("workTypes.installation")}),(0,p.jsx)("option",{value:"inspection",children:i("workTypes.inspection")}),(0,p.jsx)("option",{value:"other",children:i("workTypes.other")})]}))})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-base font-medium text-gray-300 mb-2 text-lg",children:i("jobTicket.partsUsed")}),!t&&(0,p.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsxs)("select",{value:b,onChange:f,className:"bg-gray-800 block w-full rounded-md border-2 border-orange-400 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),y.map((e=>(0,p.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,p.jsx)(u.$n,{type:"button",variant:"custom",size:"md",onClick:k,disabled:!b,className:"bg-orange-600 hover:bg-orange-700 text-black font-medium",children:i("jobTicket.addPart")})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"parts",control:o,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:w})}})})]})]})},O=r.memo(S),A=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:s}=(0,n.ok)(),{control:i,register:o,watch:c,setValue:d,formState:m}=(0,l.mN)({defaultValues:a||{parts:[]}}),[x,b]=(0,r.useState)(""),[g,y]=(0,r.useState)([]),k=(0,r.useMemo)((()=>[{value:"partLubricant",label:s("parts.lubricant")},{value:"partPumpSeal",label:s("parts.pumpSeal")},{value:"partThrustChamber",label:s("parts.thrustChamber")},{value:"partVFDBreaker",label:s("parts.vfdBreaker")},{value:"partServiceKit",label:s("parts.serviceKit")},{value:"partOther",label:s("parts.other")}]),[s]);(0,r.useEffect)((()=>{a&&a.parts&&y(a.parts)}),[a]);const v=(0,r.useCallback)((()=>{if(!x)return;const e=k.find((e=>e.value===x));if(!e)return;const t={value:x,label:e.label};y((e=>[...e,t]));const a=c("parts")||[];d("parts",[...a,t]),b(""),console.log("Part added:",t),console.log("Current parts array:",[...a,t])}),[x,k,c,d]),f=(0,r.useCallback)((e=>{y((t=>{const a=[...t];return a.splice(e,1),a}));const t=[...c("parts")||[]];t.splice(e,1),d("parts",t),console.log("Part removed at index:",e)}),[c,d]),w=(0,r.useCallback)((e=>{const t=e.target.value,a=k.find((e=>e.value===t));b(a?t:"")}),[k]),T=(0,r.useMemo)((()=>(console.log("Rendering parts list with:",g),g&&0!==g.length?g.map(((e,a)=>{let r;if("object"===typeof e&&e.label)r=e.label;else if("string"===typeof e){const t=e.replace(/^part/,"").charAt(0).toLowerCase()+e.replace(/^part/,"").slice(1);r=s("jobTicket.parts.".concat(t))}else r=String(e);return(0,p.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,p.jsx)("span",{className:"text-white",children:r}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>f(a),children:s("common.remove")})]},a)})):(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:s("jobTicket.parts.noParts")}))),[g,s,t,f]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)(j,{id:"workType",name:"workType",label:s("jobTicket.workType"),register:o,disabled:t,children:[(0,p.jsx)("option",{value:"",children:s("common.select")}),(0,p.jsx)("option",{value:"maintenance",children:s("workTypes.maintenance")}),(0,p.jsx)("option",{value:"repair",children:s("workTypes.repair")}),(0,p.jsx)("option",{value:"installation",children:s("workTypes.installation")}),(0,p.jsx)("option",{value:"inspection",children:s("workTypes.inspection")})]}),(0,p.jsx)(h,{label:s("jobTicket.equipment"),type:"text",id:"equipment",name:"equipment",register:o,placeholder:s("jobTicket.equipmentPlaceholder"),readOnly:t}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("label",{className:"block text-base font-medium text-white mb-2 text-lg",children:s("jobTicket.parts.title")}),!t&&(0,p.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsxs)(j,{id:"partSelect",name:"partSelect",value:x,onChange:w,children:[(0,p.jsx)("option",{value:"",children:s("jobTicket.parts.placeholder")}),k.map((e=>(0,p.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,p.jsx)(u.$n,{type:"button",variant:"custom",size:"md",onClick:v,disabled:!x,className:"bg-orange-600 hover:bg-orange-700 text-black font-medium",children:s("jobTicket.addPart")})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"parts",control:i,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:T})}})})]})]})},F=r.memo(A),D=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{register:o,formState:{errors:c}}=(0,l.mN)({defaultValues:a||{}}),d=(0,r.useMemo)((()=>[{value:"",label:i("common.select")},{value:"truck",label:i("vehicleTypes.truck")||"Truck"},{value:"van",label:i("vehicleTypes.van")||"Van"},{value:"car",label:i("vehicleTypes.car")||"Car"}]),[i]),m=(0,r.useMemo)((()=>performance.now()),[]);return r.useEffect((()=>{const e=performance.now()-m;return console.log("DriverTicketForm rendered in ".concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("driver-ticket-form-render")}}),[m]),(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"vehicleType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.vehicleType")||"Vehicle Type"}),(0,p.jsxs)("div",{className:"mt-1",children:[(0,p.jsx)("select",(0,s.A)((0,s.A)({id:"vehicleType",name:"vehicleType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},o("vehicleType",{required:!0})),{},{children:d.map((e=>(0,p.jsx)("option",{value:e.value,children:e.label},e.value)))})),c.vehicleType&&(0,p.jsx)("p",{className:"mt-1 text-sm text-red-500",children:i("validation.required")})]})]}),(0,p.jsx)(u.pd,{label:i("jobTicket.mileage")||"Mileage",type:"number",id:"mileage",name:"mileage",register:o,rules:{required:!0,min:0},error:c.mileage,placeholder:i("jobTicket.mileagePlaceholder")||"Enter total miles driven",readOnly:t}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"tripType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.tripType")||"Trip Type"}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"tripType",name:"tripType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},o("tripType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"local",children:i("tripTypes.local")||"Local"}),(0,p.jsx)("option",{value:"longHaul",children:i("tripTypes.longHaul")||"Long Haul"})]}))})]})]})},q=r.memo(D),M=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{control:o,register:c,watch:d,setValue:m}=(0,l.mN)({defaultValues:a||{}}),[x,b]=(0,r.useState)(""),h=(0,r.useMemo)((()=>[{value:i("materials.pipe"),label:i("materials.pipe")},{value:i("materials.fittings"),label:i("materials.fittings")},{value:i("materials.valves"),label:i("materials.valves")},{value:i("materials.tools"),label:i("materials.tools")},{value:i("materials.safety"),label:i("materials.safety")},{value:i("materials.other"),label:i("materials.other")}]),[i]),g=(0,r.useCallback)((()=>{if(!x)return;const e=d("materials")||[];m("materials",[...e,x]),b("")}),[x,d,m]),j=(0,r.useCallback)((e=>{const t=[...d("materials")||[]];t.splice(e,1),m("materials",t)}),[d,m]),y=(0,r.useCallback)((e=>{b(e.target.value)}),[]),k=(0,r.useMemo)((()=>{const e=d("materials")||[];return 0===e.length?(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:i("jobTicket.noMaterials")}):e.map(((e,a)=>(0,p.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,p.jsx)("span",{children:e}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>j(a),children:i("common.remove")})]},a)))}),[d,i,t,j]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.workType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"construction",children:i("workTypes.construction")}),(0,p.jsx)("option",{value:"maintenance",children:i("workTypes.maintenance")}),(0,p.jsx)("option",{value:"pipeline",children:i("workTypes.pipeline")}),(0,p.jsx)("option",{value:"wellService",children:i("workTypes.wellService")})]}))})]}),(0,p.jsx)(u.pd,{label:i("jobTicket.equipmentUsed"),type:"text",id:"equipmentUsed",name:"equipmentUsed",register:c,placeholder:i("jobTicket.equipmentUsedPlaceholder"),readOnly:t}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("jobTicket.materialsUsed")}),!t&&(0,p.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsxs)("select",{value:x,onChange:y,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),h.map((e=>(0,p.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,p.jsx)(u.$n,{type:"button",variant:"primary",size:"md",onClick:g,disabled:!x,children:i("common.add")})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"materials",control:o,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:k})}})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"siteConditions",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.siteConditions")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("textarea",(0,s.A)({id:"siteConditions",name:"siteConditions",rows:3,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:i("jobTicket.siteConditionsPlaceholder")},c("siteConditions")))})]})]})},V=r.memo(M),P=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{control:o,register:c,watch:d,setValue:m}=(0,l.mN)({defaultValues:a||{}}),[x,b]=(0,r.useState)(""),h=(0,r.useMemo)((()=>[{value:i("components.wiring"),label:i("components.wiring")},{value:i("components.breakers"),label:i("components.breakers")},{value:i("components.switches"),label:i("components.switches")},{value:i("components.panels"),label:i("components.panels")},{value:i("components.motors"),label:i("components.motors")},{value:i("components.other"),label:i("components.other")}]),[i]),g=(0,r.useCallback)((()=>{if(!x)return;const e=d("components")||[];m("components",[...e,x]),b("")}),[x,d,m]),j=(0,r.useCallback)((e=>{const t=[...d("components")||[]];t.splice(e,1),m("components",t)}),[d,m]),y=(0,r.useCallback)((e=>{b(e.target.value)}),[]),k=(0,r.useMemo)((()=>{const e=d("components")||[];return 0===e.length?(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:i("jobTicket.noComponents")}):e.map(((e,a)=>(0,p.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,p.jsx)("span",{children:e}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>j(a),children:i("common.remove")})]},a)))}),[d,i,t,j]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.workType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"installation",children:i("workTypes.installation")}),(0,p.jsx)("option",{value:"repair",children:i("workTypes.repair")}),(0,p.jsx)("option",{value:"maintenance",children:i("workTypes.maintenance")}),(0,p.jsx)("option",{value:"inspection",children:i("workTypes.inspection")}),(0,p.jsx)("option",{value:"troubleshooting",children:i("workTypes.troubleshooting")})]}))})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsx)(u.pd,{label:i("jobTicket.voltage"),type:"text",id:"voltage",name:"voltage",register:c,placeholder:"e.g., 120V, 240V, 480V",readOnly:t}),(0,p.jsx)(u.pd,{label:i("jobTicket.amperage"),type:"text",id:"amperage",name:"amperage",register:c,placeholder:"e.g., 15A, 20A, 30A",readOnly:t})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("jobTicket.componentsUsed")}),!t&&(0,p.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsxs)("select",{value:x,onChange:y,className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),h.map((e=>(0,p.jsx)("option",{value:e.value,children:e.label},e.value)))]})}),(0,p.jsx)(u.$n,{type:"button",variant:"primary",size:"md",onClick:g,disabled:!x,children:i("common.add")})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"components",control:o,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:k})}})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"safetyMeasures",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.safetyMeasures")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("textarea",(0,s.A)({id:"safetyMeasures",name:"safetyMeasures",rows:3,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:i("jobTicket.safetyMeasuresPlaceholder")},c("safetyMeasures")))})]})]})},E=r.memo(P),z=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{control:o,register:c,watch:d,setValue:m}=(0,l.mN)({defaultValues:a||{}}),[x,b]=(0,r.useState)(""),[h,g]=(0,r.useState)("pass"),[j,y]=(0,r.useState)(""),k=(0,r.useCallback)((()=>{if(!x)return;const e=d("inspections")||[];m("inspections",[...e,{point:x,status:h,notes:j}]),b(""),g("pass"),y("")}),[x,h,j,d,m]),v=(0,r.useCallback)((e=>{const t=[...d("inspections")||[]];t.splice(e,1),m("inspections",t)}),[d,m]),f=(0,r.useMemo)((()=>{const e=d("inspections")||[];return 0===e.length?(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:i("jobTicket.noInspections")}):e.map(((e,a)=>(0,p.jsxs)("li",{className:"bg-gray-700 rounded px-3 py-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:"font-medium",children:e.point}),(0,p.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs ".concat("pass"===e.status?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),children:"pass"===e.status?i("jobTicket.pass"):i("jobTicket.fail")})]}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>v(a),children:i("common.remove")})]}),e.notes&&(0,p.jsx)("div",{className:"mt-1 text-sm text-gray-300",children:e.notes})]},a)))}),[d,i,t,v]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.workType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"monitoring",children:i("workTypes.monitoring")}),(0,p.jsx)("option",{value:"maintenance",children:i("workTypes.maintenance")}),(0,p.jsx)("option",{value:"inspection",children:i("workTypes.inspection")}),(0,p.jsx)("option",{value:"repair",children:i("workTypes.repair")}),(0,p.jsx)("option",{value:"emergency",children:i("workTypes.emergency")})]}))})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsx)(u.pd,{label:i("jobTicket.pressureReading"),type:"text",id:"pressureReading",name:"pressureReading",register:c,placeholder:"e.g., 65 PSI",readOnly:t}),(0,p.jsx)(u.pd,{label:i("jobTicket.flowReading"),type:"text",id:"flowReading",name:"flowReading",register:c,placeholder:"e.g., 250 GPM",readOnly:t})]}),(0,p.jsx)(u.pd,{label:i("jobTicket.pipelineSection"),type:"text",id:"pipelineSection",name:"pipelineSection",register:c,placeholder:i("jobTicket.pipelineSectionPlaceholder"),readOnly:t}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("jobTicket.inspectionPoints")}),!t&&(0,p.jsxs)("div",{className:"space-y-3 mb-3 bg-gray-800 p-4 rounded-md",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"inspectionPoint",className:"block text-xs font-medium text-gray-400",children:i("jobTicket.inspectionPoint")}),(0,p.jsx)("input",{type:"text",id:"inspectionPoint",value:x,onChange:e=>b(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:i("jobTicket.inspectionPointPlaceholder")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"inspectionStatus",className:"block text-xs font-medium text-gray-400",children:i("jobTicket.status")}),(0,p.jsxs)("select",{id:"inspectionStatus",value:h,onChange:e=>g(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"pass",children:i("jobTicket.pass")}),(0,p.jsx)("option",{value:"fail",children:i("jobTicket.fail")})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"inspectionNotes",className:"block text-xs font-medium text-gray-400",children:i("jobTicket.notes")}),(0,p.jsx)("textarea",{id:"inspectionNotes",value:j,onChange:e=>y(e.target.value),rows:2,className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:i("jobTicket.notesPlaceholder")})]}),(0,p.jsx)("div",{className:"flex justify-end",children:(0,p.jsx)(u.$n,{type:"button",variant:"primary",size:"md",onClick:k,disabled:!x,children:i("common.add")})})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[300px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"inspections",control:o,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:f})}})})]})]})},I=r.memo(z),$=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{control:o,register:c,watch:d,setValue:m}=(0,l.mN)({defaultValues:a||{}}),[x,b]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),k=(0,r.useCallback)((()=>{if(!x||!j)return;const e=d("loads")||[];m("loads",[...e,{description:x,weight:h,destination:j}]),b(""),g(""),y("")}),[x,h,j,d,m]),v=(0,r.useCallback)((e=>{const t=[...d("loads")||[]];t.splice(e,1),m("loads",t)}),[d,m]),f=(0,r.useMemo)((()=>{const e=d("loads")||[];return 0===e.length?(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:i("jobTicket.noLoads")}):e.map(((e,a)=>(0,p.jsxs)("li",{className:"bg-gray-700 rounded px-3 py-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("div",{className:"font-medium",children:e.description}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>v(a),children:i("common.remove")})]}),(0,p.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-2 text-sm text-gray-300",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("span",{className:"text-gray-400",children:[i("jobTicket.weight"),": "]}),e.weight||"N/A"]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("span",{className:"text-gray-400",children:[i("jobTicket.destination"),": "]}),e.destination]})]})]},a)))}),[d,i,t,v]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.workType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"delivery",children:i("workTypes.delivery")}),(0,p.jsx)("option",{value:"pickup",children:i("workTypes.pickup")}),(0,p.jsx)("option",{value:"transport",children:i("workTypes.transport")}),(0,p.jsx)("option",{value:"equipment",children:i("workTypes.equipment")}),(0,p.jsx)("option",{value:"supplies",children:i("workTypes.supplies")})]}))})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsx)(u.pd,{label:i("jobTicket.vehicleId"),type:"text",id:"vehicleId",name:"vehicleId",register:c,placeholder:"e.g., TRK-2023-104",readOnly:t}),(0,p.jsx)(u.pd,{label:i("jobTicket.vehicleType"),type:"text",id:"vehicleType",name:"vehicleType",register:c,placeholder:"e.g., Semi-truck, Pickup, Tanker",readOnly:t})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,p.jsx)(u.pd,{label:i("jobTicket.startingMileage"),type:"number",id:"startingMileage",name:"startingMileage",register:c,placeholder:"e.g., 45780",readOnly:t}),(0,p.jsx)(u.pd,{label:i("jobTicket.endingMileage"),type:"number",id:"endingMileage",name:"endingMileage",register:c,placeholder:"e.g., 45920",readOnly:t}),(0,p.jsx)(u.pd,{label:i("jobTicket.totalMileage"),type:"number",id:"totalMileage",name:"totalMileage",register:c,readOnly:!0,value:d("endingMileage")&&d("startingMileage")?Math.max(0,Number(d("endingMileage"))-Number(d("startingMileage"))):""})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("jobTicket.loadDetails")}),!t&&(0,p.jsxs)("div",{className:"space-y-3 mb-3 bg-gray-800 p-4 rounded-md",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"loadDescription",className:"block text-xs font-medium text-gray-400",children:i("jobTicket.loadDescription")}),(0,p.jsx)("input",{type:"text",id:"loadDescription",value:x,onChange:e=>b(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:i("jobTicket.loadDescriptionPlaceholder")})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"loadWeight",className:"block text-xs font-medium text-gray-400",children:i("jobTicket.weight")}),(0,p.jsx)("input",{type:"text",id:"loadWeight",value:h,onChange:e=>g(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:"e.g., 2500 lbs"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"loadDestination",className:"block text-xs font-medium text-gray-400",children:i("jobTicket.destination")}),(0,p.jsx)("input",{type:"text",id:"loadDestination",value:j,onChange:e=>y(e.target.value),className:"mt-1 bg-gray-700 block w-full rounded-md border-gray-600 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:i("jobTicket.destinationPlaceholder")})]})]}),(0,p.jsx)("div",{className:"flex justify-end",children:(0,p.jsx)(u.$n,{type:"button",variant:"primary",size:"md",onClick:k,disabled:!x||!j,children:i("common.add")})})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[300px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"loads",control:o,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:f})}})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("jobTicket.vehicleInspection")}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("input",(0,s.A)((0,s.A)({id:"inspectionFuel",name:"inspectionFuel",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionFuel")),{},{disabled:t})),(0,p.jsx)("label",{htmlFor:"inspectionFuel",className:"ml-2 block text-sm text-gray-300",children:i("jobTicket.fuelChecked")})]}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("input",(0,s.A)((0,s.A)({id:"inspectionTires",name:"inspectionTires",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionTires")),{},{disabled:t})),(0,p.jsx)("label",{htmlFor:"inspectionTires",className:"ml-2 block text-sm text-gray-300",children:i("jobTicket.tiresChecked")})]}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("input",(0,s.A)((0,s.A)({id:"inspectionOil",name:"inspectionOil",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionOil")),{},{disabled:t})),(0,p.jsx)("label",{htmlFor:"inspectionOil",className:"ml-2 block text-sm text-gray-300",children:i("jobTicket.oilChecked")})]}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("input",(0,s.A)((0,s.A)({id:"inspectionLights",name:"inspectionLights",type:"checkbox",className:"h-4 w-4 rounded border-gray-700 text-orange-600 focus:ring-orange-500"},c("inspectionLights")),{},{disabled:t})),(0,p.jsx)("label",{htmlFor:"inspectionLights",className:"ml-2 block text-sm text-gray-300",children:i("jobTicket.lightsChecked")})]})]})]})]})},B=r.memo($),R=e=>{let{readOnly:t=!1,draftData:a=null}=e;const{t:i}=(0,n.ok)(),{control:o,register:c,watch:d,setValue:m}=(0,l.mN)({defaultValues:a||{}}),[x,b]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),j=(0,r.useCallback)((()=>{if(!x)return;const e=d("items")||[];m("items",[...e,{name:x,quantity:h||"1"}]),b(""),g("")}),[x,h,d,m]),y=(0,r.useCallback)((e=>{const t=[...d("items")||[]];t.splice(e,1),m("items",t)}),[d,m]),k=(0,r.useMemo)((()=>{const e=d("items")||[];return 0===e.length?(0,p.jsx)("li",{className:"text-gray-500 text-center py-2",children:i("jobTicket.noItems")}):e.map(((e,a)=>(0,p.jsxs)("li",{className:"flex items-center justify-between bg-gray-700 rounded px-3 py-2",children:[(0,p.jsxs)("span",{children:[e.name,e.quantity&&"1"!==e.quantity&&(0,p.jsxs)("span",{className:"ml-2 text-sm text-gray-400",children:["(",i("jobTicket.quantity"),": ",e.quantity,")"]})]}),!t&&(0,p.jsx)(u.$n,{variant:"danger",size:"sm",onClick:()=>y(a),children:i("common.remove")})]},a)))}),[d,i,t,y]);return(0,p.jsxs)(C,{readOnly:t,draftData:a,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"customJobType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.customJobType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("input",(0,s.A)({type:"text",id:"customJobType",name:"customJobType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t,placeholder:i("jobTicket.customJobTypePlaceholder")},c("customJobType")))})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"workType",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.workType")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsxs)("select",(0,s.A)((0,s.A)({id:"workType",name:"workType",className:"bg-gray-800 block w-full max-w-md rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",disabled:t},c("workType")),{},{children:[(0,p.jsx)("option",{value:"",children:i("common.select")}),(0,p.jsx)("option",{value:"maintenance",children:i("workTypes.maintenance")}),(0,p.jsx)("option",{value:"repair",children:i("workTypes.repair")}),(0,p.jsx)("option",{value:"installation",children:i("workTypes.installation")}),(0,p.jsx)("option",{value:"inspection",children:i("workTypes.inspection")}),(0,p.jsx)("option",{value:"other",children:i("workTypes.other")})]}))})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("jobTicket.materialsEquipmentUsed")}),!t&&(0,p.jsxs)("div",{className:"flex items-end space-x-2 mb-3",children:[(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:i("jobTicket.itemNamePlaceholder")})}),(0,p.jsx)("div",{className:"w-24",children:(0,p.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",placeholder:i("jobTicket.qty")})}),(0,p.jsx)(u.$n,{type:"button",variant:"primary",size:"md",onClick:j,disabled:!x,children:i("common.add")})]}),(0,p.jsx)(u.Zp,{className:"bg-gray-800 p-3 min-h-[100px] max-h-[200px] overflow-y-auto",children:(0,p.jsx)(l.xI,{name:"items",control:o,defaultValue:[],render:e=>{let{field:t}=e;return(0,p.jsx)("ul",{className:"space-y-2",children:k})}})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"additionalNotes",className:"block text-sm font-medium text-gray-300",children:i("jobTicket.additionalNotes")}),(0,p.jsx)("div",{className:"mt-1",children:(0,p.jsx)("textarea",(0,s.A)({id:"additionalNotes",name:"additionalNotes",rows:4,className:"bg-gray-800 block w-full max-w-2xl rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",readOnly:t,placeholder:i("jobTicket.additionalNotesPlaceholder")},c("additionalNotes")))})]})]})},L=r.memo(R)}}]);
//# sourceMappingURL=86.367a38e1.chunk.js.map
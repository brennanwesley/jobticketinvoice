"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[138],{7949:(e,a,l)=>{l.r(a),l.d(a,{default:()=>d});var r=l(2555),s=l(5043),n=l(8729),t=l(2136),o=l(3104),i=l(579);const d=()=>{var e;const{user:a,updateUserProfile:l,isLoading:d}=(0,n.As)(),{t:c}=(0,t.ok)(),[m,p]=(0,s.useState)({name:"",email:"",job_type:"",preferred_language:"",phone:""}),[u,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null);(0,s.useEffect)((()=>{a&&p({name:a.name||"",email:a.email||"",job_type:a.job_type||"",preferred_language:a.preferred_language||"",phone:a.phone||""})}),[a]);const y=e=>{const{name:a,value:l}=e.target;p((e=>(0,r.A)((0,r.A)({},e),{},{[a]:l})))};return d?(0,i.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,i.jsx)(o.kt,{size:"lg"})}):(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:c("profile.title")||"Profile"}),b&&(0,i.jsx)(o.Zp,{className:"bg-green-900 bg-opacity-20 border border-green-700 mb-6",children:(0,i.jsx)("p",{className:"text-green-400 p-3",children:c("profile.saveSuccess")||"Profile updated successfully!"})}),f&&(0,i.jsx)(o.Zp,{className:"bg-red-900 bg-opacity-20 border border-red-700 mb-6",children:(0,i.jsx)("p",{className:"text-red-400 p-3",children:f})}),(0,i.jsx)(o.Zp,{className:"p-6",children:(0,i.jsx)("form",{onSubmit:async e=>{e.preventDefault(),g(!0),j(!1),v(null);try{await l(m),h(!1),j(!0),setTimeout((()=>{j(!1)}),3e3)}catch(a){console.error("Error updating profile:",a),v(a.message||"Failed to update profile")}finally{g(!1)}},children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"h-24 w-24 rounded-full bg-slate-700 flex items-center justify-center",children:null!==a&&void 0!==a&&a.logo_url?(0,i.jsx)("img",{src:a.logo_url,alt:a.name,className:"h-24 w-24 rounded-full object-cover"}):(0,i.jsx)("span",{className:"text-3xl text-gray-400",children:(null===a||void 0===a||null===(e=a.name)||void 0===e?void 0:e.charAt(0))||"?"})}),u&&(0,i.jsx)("button",{type:"button",className:"absolute bottom-0 right-0 rounded-full bg-orange-600 p-1 text-white",onClick:()=>console.log("Change profile picture"),children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})]})}),(0,i.jsx)(o.pd,{label:c("profile.name")||"Name",type:"text",id:"name",name:"name",value:m.name,onChange:y,disabled:!u}),(0,i.jsx)(o.pd,{label:c("profile.email")||"Email",type:"email",id:"email",name:"email",value:m.email,onChange:y,disabled:!u}),(0,i.jsx)(o.pd,{label:c("profile.phone")||"Phone",type:"tel",id:"phone",name:"phone",value:m.phone,onChange:y,disabled:!u}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"job_type",className:"block text-sm font-medium text-gray-300",children:c("profile.jobType")||"Job Type"}),(0,i.jsxs)("select",{id:"job_type",name:"job_type",className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:m.job_type,onChange:y,disabled:!u,children:[(0,i.jsx)("option",{value:"",children:c("common.select")||"Select..."}),(0,i.jsx)("option",{value:"pump_tech",children:c("jobTypes.pumpTech")||"Pump Technician"}),(0,i.jsx)("option",{value:"driver",children:c("jobTypes.driver")||"Driver"}),(0,i.jsx)("option",{value:"admin",children:c("jobTypes.admin")||"Administrator"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"preferred_language",className:"block text-sm font-medium text-gray-300",children:c("profile.preferredLanguage")||"Preferred Language"}),(0,i.jsxs)("select",{id:"preferred_language",name:"preferred_language",className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:m.preferred_language,onChange:y,disabled:!u,children:[(0,i.jsx)("option",{value:"en",children:"English"}),(0,i.jsx)("option",{value:"es",children:"Espa\xf1ol"})]})]}),(0,i.jsx)("div",{className:"flex justify-end space-x-4 pt-4",children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.$n,{type:"button",variant:"secondary",onClick:()=>h(!1),disabled:x,children:c("common.cancel")||"Cancel"}),(0,i.jsx)(o.$n,{type:"submit",variant:"primary",disabled:x,children:x?(0,i.jsx)(o.kt,{size:"sm"}):c("common.save")||"Save"})]}):(0,i.jsx)(o.$n,{type:"button",variant:"primary",onClick:()=>h(!0),children:c("profile.edit")||"Edit Profile"})})]})})})]})}}}]);
//# sourceMappingURL=profile.d77f6742.chunk.js.map
"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[554],{9568:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(2555),l=a(5043),r=a(2136),o=a(8729),i=a(5475),n=a(579);const d=()=>{const{t:e}=(0,r.ok)(),{user:s,login:a,register:d,logout:c,uploadLogo:m}=(0,o.As)(),[x,h]=(0,l.useState)([]),[g,p]=(0,l.useState)(!1),[u,b]=(0,l.useState)({email:"test@example.com",password:"Password123!"}),[y,j]=(0,l.useState)({name:"Test User",email:"test".concat(Math.floor(1e4*Math.random()),"@example.com"),password:"Password123!",role:"tech",job_type:"pump_service_technician"}),v=(e,s,a)=>{const t=(new Date).toLocaleTimeString();h((l=>[{id:Date.now(),timestamp:t,title:e,success:s,data:a},...l]))},N=e=>{const{name:s,value:a}=e.target;b((e=>(0,t.A)((0,t.A)({},e),{},{[s]:a})))},w=e=>{const{name:s,value:a}=e.target;j((e=>(0,t.A)((0,t.A)({},e),{},{[s]:a})))};return(0,n.jsx)("div",{className:"min-h-screen bg-slate-900 py-12 px-4",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-center text-white mb-8",children:e("auth.testPageTitle")}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,n.jsxs)("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:e("auth.testControls")}),(0,n.jsxs)("div",{className:"mb-6 p-4 bg-slate-700 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:e("auth.currentStatus")}),(0,n.jsx)("p",{className:"text-sm",children:s?(0,n.jsxs)("span",{className:"text-green-500",children:[e("auth.loggedInAs"),": ",s.email]}):(0,n.jsx)("span",{className:"text-red-500",children:e("auth.notLoggedIn")})}),s&&(0,n.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:[(0,n.jsxs)("p",{children:["Role: ",s.role]}),(0,n.jsxs)("p",{children:["Name: ",s.name]}),"tech"===s.role&&(0,n.jsxs)("p",{children:["Job Type: ",s.job_type]}),"manager"===s.role&&(0,n.jsxs)("p",{children:["Company: ",s.company_name]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:e("auth.loginTest")}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"login-email",className:"block text-sm text-gray-400 mb-1",children:"Email"}),(0,n.jsx)("input",{id:"login-email",type:"email",name:"email",value:u.email,onChange:N,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white placeholder-gray-400"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"login-password",className:"block text-sm text-gray-400 mb-1",children:"Password"}),(0,n.jsx)("input",{id:"login-password",type:"password",name:"password",value:u.password,onChange:N,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white placeholder-gray-400"})]}),(0,n.jsx)("button",{onClick:async()=>{p(!0);try{const e=await a(u.email,u.password);v("Login Test",e.success,e)}catch(e){v("Login Test",!1,{error:e.message})}finally{p(!1)}},disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md disabled:opacity-50",children:e(g?"common.loading":"auth.runLoginTest")})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:e("auth.registerTest")}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"register-name",className:"block text-sm text-gray-400 mb-1",children:"Name"}),(0,n.jsx)("input",{id:"register-name",type:"text",name:"name",value:y.name,onChange:w,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white placeholder-gray-400"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"register-email",className:"block text-sm text-gray-400 mb-1",children:"Email"}),(0,n.jsx)("input",{id:"register-email",type:"email",name:"email",value:y.email,onChange:w,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white placeholder-gray-400"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"register-password",className:"block text-sm text-gray-400 mb-1",children:"Password"}),(0,n.jsx)("input",{id:"register-password",type:"password",name:"password",value:y.password,onChange:w,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white placeholder-gray-400"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"register-role",className:"block text-sm text-gray-400 mb-1",children:"Role"}),(0,n.jsxs)("select",{id:"register-role",name:"role",value:y.role,onChange:w,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white",children:[(0,n.jsx)("option",{value:"tech",children:"Tech"}),(0,n.jsx)("option",{value:"manager",children:"Manager"})]})]}),"tech"===y.role&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"register-job-type",className:"block text-sm text-gray-400 mb-1",children:"Job Type"}),(0,n.jsxs)("select",{id:"register-job-type",name:"job_type",value:y.job_type,onChange:w,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white",children:[(0,n.jsx)("option",{value:"pump_service_technician",children:"Pump Technician"}),(0,n.jsx)("option",{value:"roustabout",children:"Roustabout"}),(0,n.jsx)("option",{value:"electrician",children:"Electrician"}),(0,n.jsx)("option",{value:"pipeline_operator",children:"Pipeline Operator"}),(0,n.jsx)("option",{value:"truck_driver",children:"Truck Driver"}),(0,n.jsx)("option",{value:"other",children:"Other"})]})]}),"manager"===y.role&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"register-company-name",className:"block text-sm text-gray-400 mb-1",children:"Company Name"}),(0,n.jsx)("input",{id:"register-company-name",type:"text",name:"company_name",value:y.company_name||"",onChange:w,className:"w-full px-3 py-2 bg-slate-700 border border-gray-600 rounded-md text-white placeholder-gray-400"})]}),(0,n.jsx)("button",{onClick:async()=>{p(!0);try{const e=await d(y);v("Register Test",e.success,e),e.success&&(b((e=>(0,t.A)((0,t.A)({},e),{},{email:y.email}))),j((e=>(0,t.A)((0,t.A)({},e),{},{email:"test".concat(Math.floor(1e4*Math.random()),"@example.com")}))))}catch(e){v("Register Test",!1,{error:e.message})}finally{p(!1)}},disabled:g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md disabled:opacity-50",children:e(g?"common.loading":"auth.runRegisterTest")})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("button",{onClick:()=>{try{c(),v("Logout Test",!0,{message:"Successfully logged out"})}catch(e){v("Logout Test",!1,{error:e.message})}},className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md",children:e("auth.runLogoutTest")}),s&&"manager"===s.role&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:e("auth.logoUploadTest")}),(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const s=e.target.files[0];if(s){p(!0);try{const e=await m(s);v("Logo Upload Test",e.success,e)}catch(a){v("Logo Upload Test",!1,{error:a.message})}finally{p(!1)}}},className:"w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-orange-600 file:text-white hover:file:bg-orange-700"})]})]})]}),(0,n.jsxs)("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:e("auth.testResults")}),0===x.length?(0,n.jsx)("p",{className:"text-gray-400 text-center py-8",children:e("auth.noTestResults")}):(0,n.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto",children:x.map((e=>(0,n.jsxs)("div",{className:"p-3 rounded-md border ".concat(e.success?"border-green-500 bg-green-900 bg-opacity-20":"border-red-500 bg-red-900 bg-opacity-20"),children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsx)("h3",{className:"font-medium",children:e.title}),(0,n.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp})]}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("p",{className:e.success?"text-green-500":"text-red-500",children:e.success?"\u2713 Success":"\u2717 Failed"}),(0,n.jsx)("pre",{className:"mt-2 text-xs bg-slate-900 p-2 rounded overflow-x-auto",children:JSON.stringify(e.data,null,2)})]})]},e.id)))}),x.length>0&&(0,n.jsx)("button",{onClick:()=>h([]),className:"mt-4 w-full bg-slate-700 hover:bg-slate-600 text-white font-medium py-2 px-4 rounded-md",children:e("auth.clearResults")})]})]}),(0,n.jsx)("div",{className:"mt-8 text-center",children:(0,n.jsxs)(i.N_,{to:"/",className:"text-orange-500 hover:text-orange-400",children:["\u2190 ",e("common.back")]})})]})})}}}]);
//# sourceMappingURL=auth-test.f1b66e93.chunk.js.map
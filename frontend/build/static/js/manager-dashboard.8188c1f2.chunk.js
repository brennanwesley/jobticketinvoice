"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[111],{911:(e,a,s)=>{s.d(a,{A:()=>c});var t=s(5043),n=s(2136),i=s(579);const l=()=>{const{language:e,toggleLanguage:a}=(0,n.ok)(),s="en"===e?"Espa\xf1ol":"English",t="es"===e?"click for":"haga clic para";return(0,i.jsxs)("button",{onClick:a,className:"absolute top-0 right-0 m-4 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors flex items-center focus:outline-none focus:ring-2 focus:ring-orange-700","aria-label":"".concat(t," ").concat(s),title:"".concat(t," ").concat(s),tabIndex:0,children:[(0,i.jsx)("span",{className:"text-xs italic text-white mr-1",children:t}),(0,i.jsx)("span",{children:s})]})},c=(0,t.memo)(l)},1728:(e,a,s)=>{s.r(a),s.d(a,{default:()=>U});var t=s(5043),n=s(2136),i=s(1612),l=s(2555),c=s(8729),r=s(3449),o=s(579);const m=()=>{const{user:e,isAuthenticated:a}=(0,c.As)(),s=(0,t.useMemo)((()=>a&&e&&("manager"===e.role||"admin"===e.role)),[a,e]),n=(0,t.useMemo)((()=>a&&e&&"admin"===e.role),[a,e]),i=(0,t.useMemo)((()=>a&&e&&"tech"===e.role),[a,e]),m=(0,t.useMemo)((()=>(null===e||void 0===e?void 0:e.company_id)||null),[e]),d=(0,t.useCallback)((()=>!(!a||!e)&&("manager"===e.role||"admin"===e.role)),[a,e]),h=(0,t.useCallback)((()=>d()),[d]),g=(0,t.useCallback)((()=>d()),[d]),x=(0,t.useCallback)((()=>d()),[d]),u=(0,t.useCallback)((()=>d()),[d]),j=(0,t.useCallback)((()=>d()),[d]),v=(0,t.useCallback)((()=>d()),[d]),b=(0,t.useCallback)((()=>d()),[d]),p=(0,t.useCallback)((()=>d()),[d]),N=(0,t.useCallback)((e=>!(!m||!e)&&m===e),[m]),f=(0,t.useCallback)((async function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i="";if(a)if(e){switch(s){case"manager_features":n=d(),i=n?"":"Insufficient role permissions";break;case"technician_management":n=h(),i=n?"":"Cannot manage technicians";break;case"company_profile":n=g(),i=n?"":"Cannot edit company profile";break;case"audit_logs":n=x(),i=n?"":"Cannot view audit logs";break;case"data_export":n=u(),i=n?"":"Cannot export data";break;case"invite_technicians":n=j(),i=n?"":"Cannot invite technicians";break;case"deactivate_technicians":n=v(),i=n?"":"Cannot deactivate technicians";break;case"batch_operations":n=b(),i=n?"":"Cannot perform batch operations";break;case"upload_logo":n=p(),i=n?"":"Cannot upload company logo";break;default:n=!1,i="Unknown permission type"}n&&t.targetCompanyId&&(N(t.targetCompanyId)||(n=!1,i="Cross-company access denied"))}else i="User data not available";else i="User not authenticated";return n||await(0,r.wu)(r.Km.UNAUTHORIZED_ACCESS_ATTEMPT,{permission:s,reason:i,context:t,user_id:(null===e||void 0===e?void 0:e.id)||null,user_email:(null===e||void 0===e?void 0:e.email)||null,user_role:(null===e||void 0===e?void 0:e.role)||null,company_id:m,url:window.location.pathname,timestamp:(new Date).toISOString()}),{hasAccess:n,reason:n?null:i}}),[a,e,m,d,h,g,x,u,j,v,b,p,N]),y=(0,t.useCallback)((function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manager_features";return function(s){const{hasAccess:t}=f(a);return t?(0,o.jsx)(e,(0,l.A)({},s)):(0,o.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,o.jsx)("h4",{className:"alert-heading",children:"Access Denied"}),(0,o.jsx)("p",{children:"You don't have permission to access this feature."}),(0,o.jsx)("hr",{}),(0,o.jsx)("p",{className:"mb-0",children:"Please contact your administrator if you believe this is an error."})]})}}),[f]),w=(0,t.useCallback)((()=>({isAuthenticated:a,isManager:s,isAdmin:n,isTechnician:i,companyId:m,permissions:{managerFeatures:d(),technicianManagement:h(),companyProfile:g(),auditLogs:x(),dataExport:u(),inviteTechnicians:j(),deactivateTechnicians:v(),batchOperations:b(),uploadLogo:p()}})),[a,s,n,i,m,d,h,g,x,u,j,v,b,p]);return{isManager:s,isAdmin:n,isTechnician:i,isAuthenticated:a,user:e,companyId:m,canAccessManagerFeatures:d,canManageTechnicians:h,canEditCompanyProfile:g,canViewAuditLogs:x,canExportData:u,canInviteTechnicians:j,canDeactivateTechnicians:v,canPerformBatchOperations:b,canUploadCompanyLogo:p,belongsToSameCompany:N,validateAccess:f,withManagerAccess:y,getPermissionsSummary:w}},d=e=>{let{show:a,onHide:s,onSuccess:c}=e;const{t:d}=(0,n.ok)(),{inviteTechnician:h}=(0,i.zS)(),{validateAccess:g}=m(),[x,u]=(0,t.useState)({email:"",firstName:"",lastName:"",jobType:""}),[j,v]=(0,t.useState)({}),[b,p]=(0,t.useState)(!1),N=e=>{const{name:a,value:s}=e.target;u((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s}))),j[a]&&v((e=>(0,l.A)((0,l.A)({},e),{},{[a]:null})))},f=()=>{b||(u({email:"",firstName:"",lastName:"",jobType:""}),v({}),s())};return a?(0,o.jsx)("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,o.jsx)("div",{className:"modal-dialog modal-lg",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsxs)("h5",{className:"modal-title",children:[(0,o.jsx)("i",{className:"bi bi-person-plus me-2"}),d("manager.techManagement.inviteForm.title")]}),(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:f,disabled:b,"aria-label":d("common.close")})]}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return x.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)||(e.email=d("manager.techManagement.inviteForm.errors.emailInvalid")):e.email=d("manager.techManagement.inviteForm.errors.emailRequired"),x.firstName.trim()?x.firstName.trim().length<2&&(e.firstName=d("manager.techManagement.inviteForm.errors.firstNameTooShort")):e.firstName=d("manager.techManagement.inviteForm.errors.firstNameRequired"),x.lastName.trim()?x.lastName.trim().length<2&&(e.lastName=d("manager.techManagement.inviteForm.errors.lastNameTooShort")):e.lastName=d("manager.techManagement.inviteForm.errors.lastNameRequired"),x.jobType||(e.jobType=d("manager.techManagement.inviteForm.errors.jobTypeRequired")),v(e),0===Object.keys(e).length})())return;const{hasAccess:a}=await g("invitation_management");if(a){p(!0),v({});try{const e=await h({email:x.email.trim(),first_name:x.firstName.trim(),last_name:x.lastName.trim(),job_type:x.jobType});var s,t,n,i;if(e.success)await(0,r.Ip)(r.Km.TECHNICIAN_INVITED,null,"".concat(x.firstName," ").concat(x.lastName),{email:x.email,job_type:x.jobType,invitation_id:null===(s=e.invitation)||void 0===s?void 0:s.id}),u({email:"",firstName:"",lastName:"",jobType:""}),c();else null!==(t=e.error)&&void 0!==t&&t.includes("already exists")||null!==(n=e.error)&&void 0!==n&&n.includes("duplicate")?v({email:d("manager.techManagement.inviteForm.errors.emailExists")}):null!==(i=e.error)&&void 0!==i&&i.includes("invalid email")?v({email:d("manager.techManagement.inviteForm.errors.emailInvalid")}):v({submit:e.error||d("common.errorOccurred")})}catch(l){console.error("Error inviting technician:",l),v({submit:d("common.errorOccurred")})}finally{p(!1)}}else v({submit:d("common.accessDenied")})},children:[(0,o.jsxs)("div",{className:"modal-body",children:[(0,o.jsx)("p",{className:"text-muted mb-4",children:d("manager.techManagement.inviteForm.description")}),j.submit&&(0,o.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,o.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),j.submit]}),(0,o.jsxs)("div",{className:"row g-3",children:[(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsxs)("label",{htmlFor:"email",className:"form-label",children:[d("manager.techManagement.inviteForm.email")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("input",{type:"email",className:"form-control ".concat(j.email?"is-invalid":""),id:"email",name:"email",value:x.email,onChange:N,placeholder:d("manager.techManagement.inviteForm.emailPlaceholder"),disabled:b,autoComplete:"email"}),j.email&&(0,o.jsx)("div",{className:"invalid-feedback",children:j.email}),(0,o.jsx)("div",{className:"form-text",children:d("manager.techManagement.inviteForm.emailHelp")})]}),(0,o.jsxs)("div",{className:"col-md-6",children:[(0,o.jsxs)("label",{htmlFor:"firstName",className:"form-label",children:[d("manager.techManagement.inviteForm.firstName")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("input",{type:"text",className:"form-control ".concat(j.firstName?"is-invalid":""),id:"firstName",name:"firstName",value:x.firstName,onChange:N,placeholder:d("manager.techManagement.inviteForm.firstNamePlaceholder"),disabled:b,autoComplete:"given-name"}),j.firstName&&(0,o.jsx)("div",{className:"invalid-feedback",children:j.firstName})]}),(0,o.jsxs)("div",{className:"col-md-6",children:[(0,o.jsxs)("label",{htmlFor:"lastName",className:"form-label",children:[d("manager.techManagement.inviteForm.lastName")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)("input",{type:"text",className:"form-control ".concat(j.lastName?"is-invalid":""),id:"lastName",name:"lastName",value:x.lastName,onChange:N,placeholder:d("manager.techManagement.inviteForm.lastNamePlaceholder"),disabled:b,autoComplete:"family-name"}),j.lastName&&(0,o.jsx)("div",{className:"invalid-feedback",children:j.lastName})]}),(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsxs)("label",{htmlFor:"jobType",className:"form-label",children:[d("manager.techManagement.inviteForm.jobType")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)("select",{className:"form-select ".concat(j.jobType?"is-invalid":""),id:"jobType",name:"jobType",value:x.jobType,onChange:N,disabled:b,children:[(0,o.jsx)("option",{value:"",children:d("manager.techManagement.inviteForm.jobTypePlaceholder")}),["Electrician","Plumber","HVAC Technician","Carpenter","General Maintenance","Appliance Repair","Landscaper","Painter","Cleaner","Other"].map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]}),j.jobType&&(0,o.jsx)("div",{className:"invalid-feedback",children:j.jobType}),(0,o.jsx)("div",{className:"form-text",children:d("manager.techManagement.inviteForm.jobTypeHelp")})]})]}),(0,o.jsxs)("div",{className:"alert alert-info mt-4",role:"alert",children:[(0,o.jsx)("i",{className:"bi bi-info-circle me-2"}),(0,o.jsx)("strong",{children:d("manager.techManagement.inviteForm.infoTitle")}),(0,o.jsxs)("ul",{className:"mb-0 mt-2",children:[(0,o.jsx)("li",{children:d("manager.techManagement.inviteForm.info1")}),(0,o.jsx)("li",{children:d("manager.techManagement.inviteForm.info2")}),(0,o.jsx)("li",{children:d("manager.techManagement.inviteForm.info3")})]})]})]}),(0,o.jsxs)("div",{className:"modal-footer",children:[(0,o.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:f,disabled:b,children:d("common.cancel")}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),d("manager.techManagement.inviteForm.sending")]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"bi bi-envelope me-2"}),d("manager.techManagement.inviteForm.sendInvitation")]})})]})]})]})})}):null};var h=s(3986);const g=["title","titleId"];const x=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,g);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))})),u=e=>{let{type:a="info",message:s,duration:n=5e3,show:i=!0,onClose:l}=e;const[c,r]=(0,t.useState)(i);(0,t.useEffect)((()=>{if(r(i),i&&n){const e=setTimeout((()=>{r(!1),l&&l()}),n);return()=>clearTimeout(e)}}),[i,n,l]);if(!c)return null;const m={success:"bg-green-500 bg-opacity-20 border border-green-500 text-green-500",error:"bg-red-500 bg-opacity-20 border border-red-500 text-red-500",warning:"bg-yellow-500 bg-opacity-20 border border-yellow-500 text-yellow-500",info:"bg-blue-500 bg-opacity-20 border border-blue-500 text-blue-500"};return(0,o.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 px-4 py-3 rounded-md shadow-lg flex items-center justify-between ".concat(m[a]||m.info),children:[(0,o.jsx)("div",{className:"mr-3",children:s}),(0,o.jsx)("button",{onClick:()=>{r(!1),l&&l()},className:"text-current hover:text-opacity-70","aria-label":"Close",children:(0,o.jsx)(x,{className:"h-5 w-5"})})]})},j=()=>{const{t:e}=(0,n.ok)(),{technicians:a,loadingTechnicians:s,technicianError:l,technicianFilter:c,setTechnicianFilter:h,selectedTechnicians:g,setSelectedTechnicians:x,fetchTechnicians:j,updateTechnicianStatus:v,batchUpdateTechnicians:b,resendInvitation:p,getTechnicianStats:N,invitations:f}=(0,i.zS)(),{validateAccess:y}=m(),[w,k]=(0,t.useState)(!1),[C,M]=(0,t.useState)(null),[A,T]=(0,t.useState)(null),[L,_]=(0,t.useState)(""),[E,S]=(0,t.useState)("name"),[F,I]=(0,t.useState)("asc");(0,t.useEffect)((()=>{j()}),[j]);const P=(0,t.useCallback)((()=>{let e=a.filter((e=>{var a,s,t,n;return!L||(null===(a=e.first_name)||void 0===a?void 0:a.toLowerCase().includes(L.toLowerCase()))||(null===(s=e.last_name)||void 0===s?void 0:s.toLowerCase().includes(L.toLowerCase()))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(L.toLowerCase()))||(null===(n=e.job_type)||void 0===n?void 0:n.toLowerCase().includes(L.toLowerCase()))}));return e.sort(((e,a)=>{let s,t;switch(E){case"name":s="".concat(e.first_name||""," ").concat(e.last_name||"").trim(),t="".concat(a.first_name||""," ").concat(a.last_name||"").trim();break;case"email":s=e.email||"",t=a.email||"";break;case"status":s=D(e),t=D(a);break;case"jobType":s=e.job_type||"",t=a.job_type||"";break;case"lastActive":s=new Date(e.last_login||0),t=new Date(a.last_login||0);break;default:s=e[E]||"",t=a[E]||""}if("lastActive"===E)return"asc"===F?s-t:t-s;const n=s.toString().localeCompare(t.toString());return"asc"===F?n:-n})),e}),[a,L,E,F]),D=e=>e.pending_invitation?3:e.is_active?1:2,O=a=>a.pending_invitation?{key:"pending",label:e("manager.techManagement.statusPending"),class:"warning"}:a.is_active?{key:"active",label:e("manager.techManagement.statusActive"),class:"success"}:{key:"deactivated",label:e("manager.techManagement.statusDeactivated"),class:"secondary"},U=async(a,s)=>{const{hasAccess:t}=await y("technician_management");if(!t)return void T({type:"error",message:e("common.accessDenied")});const n="".concat(a.first_name," ").concat(a.last_name);["deactivate","remove"].includes(s)?M({title:e("manager.techManagement.confirmations.".concat(s,".title")),message:e("manager.techManagement.confirmations.".concat(s,".message"),{name:n}),confirmText:e("manager.techManagement.confirmations.".concat(s,".confirm")),cancelText:e("manager.techManagement.confirmations.".concat(s,".cancel")),variant:"remove"===s?"danger":"warning",showWarning:"remove"===s,warningText:"remove"===s?e("manager.techManagement.confirmations.".concat(s,".warning")):null,onConfirm:()=>H(a,s,n),onCancel:()=>M(null)}):await H(a,s,n)},H=async(a,s,t)=>{M(null);try{let n;if("reinvite"===s){const e=f.find((e=>e.email===a.email));if(!e)throw new Error("Invitation not found");n=await p(e.id)}else n=await v(a.id,s);if(!n.success)throw new Error(n.error);{await(0,r.Ip)(r.Km["TECHNICIAN_".concat(s.toUpperCase())]||"technician_".concat(s),a.id,t,{action:s,previous_status:O(a).key});const n="reinvite"===s?"invitationResent":"technician".concat(s.charAt(0).toUpperCase()+s.slice(1),"d");T({type:"success",message:e("manager.techManagement.messages.".concat(n))})}}catch(n){console.error("Error ".concat(s," technician:"),n),T({type:"error",message:n.message||e("common.errorOccurred")})}},R=async a=>{if(0===g.length)return;const{hasAccess:s}=await y("batch_operations");s?M({title:e("manager.techManagement.confirmations.batch".concat(a.charAt(0).toUpperCase()+a.slice(1),".title")),message:e("manager.techManagement.confirmations.batch".concat(a.charAt(0).toUpperCase()+a.slice(1),".message"),{count:g.length}),confirmText:e("manager.techManagement.confirmations.batch".concat(a.charAt(0).toUpperCase()+a.slice(1),".confirm")),cancelText:e("manager.techManagement.confirmations.batch".concat(a.charAt(0).toUpperCase()+a.slice(1),".cancel")),variant:"remove"===a?"danger":"warning",showWarning:"remove"===a,warningText:"remove"===a?e("manager.techManagement.confirmations.batch".concat(a.charAt(0).toUpperCase()+a.slice(1),".warning")):null,onConfirm:()=>z(a),onCancel:()=>M(null)}):T({type:"error",message:e("common.accessDenied")})},z=async a=>{M(null);try{const s=await b(g,a);if(!(s.success||s.successCount>0))throw new Error("Batch operation failed");{await(0,r.Ip)(r.Km.BATCH_TECHNICIAN_UPDATE,null,"Multiple technicians",{action:a,technician_ids:g,success_count:s.successCount,failure_count:s.failureCount});const t="technicians".concat(a.charAt(0).toUpperCase()+a.slice(1),"d");T({type:s.failureCount>0?"warning":"success",message:e("manager.techManagement.messages.".concat(t),{count:s.successCount})}),x([])}}catch(s){console.error("Error batch ".concat(a,":"),s),T({type:"error",message:e("common.errorOccurred")})}},B=N(),V=P();return(0,o.jsxs)("div",{className:"technician-management",children:[(0,o.jsx)("div",{className:"management-header mb-4",children:(0,o.jsxs)("div",{className:"row align-items-center",children:[(0,o.jsxs)("div",{className:"col",children:[(0,o.jsx)("h2",{className:"h4 mb-1",children:e("manager.techManagement.title")}),(0,o.jsx)("p",{className:"text-muted mb-0",children:e("manager.techManagement.subtitle")})]}),(0,o.jsx)("div",{className:"col-auto",children:(0,o.jsxs)("button",{className:"btn btn-primary",onClick:()=>k(!0),children:[(0,o.jsx)("i",{className:"bi bi-person-plus me-2"}),e("manager.techManagement.inviteTechnician")]})})]})}),(0,o.jsxs)("div",{className:"row g-3 mb-4",children:[(0,o.jsx)("div",{className:"col-md-3",children:(0,o.jsx)("div",{className:"stat-card card",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"stat-icon bg-primary me-3",children:(0,o.jsx)("i",{className:"bi bi-people-fill text-white"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"mb-0",children:B.total}),(0,o.jsx)("small",{className:"text-muted",children:e("manager.techManagement.totalTechnicians")})]})]})})})}),(0,o.jsx)("div",{className:"col-md-3",children:(0,o.jsx)("div",{className:"stat-card card",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"stat-icon bg-success me-3",children:(0,o.jsx)("i",{className:"bi bi-check-circle-fill text-white"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"mb-0",children:B.active}),(0,o.jsx)("small",{className:"text-muted",children:e("manager.techManagement.activeTechnicians")})]})]})})})}),(0,o.jsx)("div",{className:"col-md-3",children:(0,o.jsx)("div",{className:"stat-card card",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"stat-icon bg-warning me-3",children:(0,o.jsx)("i",{className:"bi bi-clock-fill text-white"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"mb-0",children:B.pending}),(0,o.jsx)("small",{className:"text-muted",children:e("manager.techManagement.pendingInvitations")})]})]})})})}),(0,o.jsx)("div",{className:"col-md-3",children:(0,o.jsx)("div",{className:"stat-card card",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"stat-icon bg-secondary me-3",children:(0,o.jsx)("i",{className:"bi bi-pause-circle-fill text-white"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"mb-0",children:B.deactivated}),(0,o.jsx)("small",{className:"text-muted",children:e("manager.techManagement.deactivatedTechnicians")})]})]})})})})]}),(0,o.jsx)("div",{className:"filters-section card mb-4",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"row g-3 align-items-center",children:[(0,o.jsxs)("div",{className:"col-md-3",children:[(0,o.jsx)("label",{className:"form-label",children:e("common.search")}),(0,o.jsxs)("div",{className:"input-group",children:[(0,o.jsx)("span",{className:"input-group-text",children:(0,o.jsx)("i",{className:"bi bi-search"})}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:e("common.searchPlaceholder"),value:L,onChange:e=>_(e.target.value)})]})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("common.status")}),(0,o.jsxs)("select",{className:"form-select",value:c,onChange:e=>h(e.target.value),children:[(0,o.jsx)("option",{value:"all",children:e("manager.techManagement.filterAll")}),(0,o.jsx)("option",{value:"active",children:e("manager.techManagement.filterActive")}),(0,o.jsx)("option",{value:"pending",children:e("manager.techManagement.filterPending")}),(0,o.jsx)("option",{value:"deactivated",children:e("manager.techManagement.filterDeactivated")})]})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("common.sortBy")}),(0,o.jsxs)("select",{className:"form-select",value:E,onChange:e=>S(e.target.value),children:[(0,o.jsx)("option",{value:"name",children:e("manager.techManagement.name")}),(0,o.jsx)("option",{value:"email",children:e("manager.techManagement.email")}),(0,o.jsx)("option",{value:"status",children:e("manager.techManagement.status")}),(0,o.jsx)("option",{value:"jobType",children:e("manager.techManagement.jobType")}),(0,o.jsx)("option",{value:"lastActive",children:e("manager.techManagement.lastActive")})]})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("common.order")}),(0,o.jsxs)("select",{className:"form-select",value:F,onChange:e=>I(e.target.value),children:[(0,o.jsx)("option",{value:"asc",children:e("common.ascending")}),(0,o.jsx)("option",{value:"desc",children:e("common.descending")})]})]}),(0,o.jsxs)("div",{className:"col-md-3",children:[(0,o.jsx)("div",{className:"form-label",children:"\xa0"}),(0,o.jsx)("div",{className:"d-flex gap-2",children:g.length>0&&(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsxs)("button",{className:"btn btn-outline-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:[e("manager.techManagement.batchActions")," (",g.length,")"]}),(0,o.jsxs)("ul",{className:"dropdown-menu",children:[(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>R("activate"),children:[(0,o.jsx)("i",{className:"bi bi-check-circle me-2"}),e("manager.techManagement.batchActivate")]})}),(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>R("deactivate"),children:[(0,o.jsx)("i",{className:"bi bi-pause-circle me-2"}),e("manager.techManagement.batchDeactivate")]})}),(0,o.jsx)("li",{children:(0,o.jsx)("hr",{className:"dropdown-divider"})}),(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item text-danger",onClick:()=>R("remove"),children:[(0,o.jsx)("i",{className:"bi bi-trash me-2"}),e("manager.techManagement.batchRemove")]})})]})]})})]})]})})}),(0,o.jsx)("div",{className:"technicians-table card",children:(0,o.jsx)("div",{className:"card-body p-0",children:s?(0,o.jsxs)("div",{className:"text-center py-5",children:[(0,o.jsx)("div",{className:"spinner-border",role:"status",children:(0,o.jsx)("span",{className:"visually-hidden",children:e("manager.techManagement.messages.loadingTechnicians")})}),(0,o.jsx)("p",{className:"mt-2 text-muted",children:e("manager.techManagement.messages.loadingTechnicians")})]}):l?(0,o.jsxs)("div",{className:"alert alert-danger m-3",role:"alert",children:[(0,o.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),l]}):0===V.length?(0,o.jsxs)("div",{className:"text-center py-5",children:[(0,o.jsx)("i",{className:"bi bi-people display-1 text-muted"}),(0,o.jsx)("p",{className:"mt-3 text-muted",children:e("manager.techManagement.messages.noTechniciansFound")}),(0,o.jsxs)("button",{className:"btn btn-primary",onClick:()=>k(!0),children:[(0,o.jsx)("i",{className:"bi bi-person-plus me-2"}),e("manager.techManagement.inviteTechnician")]})]}):(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"table table-hover mb-0",children:[(0,o.jsx)("thead",{className:"table-light",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,o.jsx)("div",{className:"form-check",children:(0,o.jsx)("input",{className:"form-check-input",type:"checkbox",checked:g.length===V.length&&V.length>0,onChange:()=>{g.length===P().length?x([]):x(P().map((e=>e.id)))}})})}),(0,o.jsx)("th",{children:e("manager.techManagement.name")}),(0,o.jsx)("th",{children:e("manager.techManagement.email")}),(0,o.jsx)("th",{children:e("manager.techManagement.jobType")}),(0,o.jsx)("th",{children:e("manager.techManagement.status")}),(0,o.jsx)("th",{children:e("manager.techManagement.lastActive")}),(0,o.jsx)("th",{children:e("manager.techManagement.actions")})]})}),(0,o.jsx)("tbody",{children:V.map((a=>{var s,t;const n=O(a);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"form-check",children:(0,o.jsx)("input",{className:"form-check-input",type:"checkbox",checked:g.includes(a.id),onChange:()=>{return e=a.id,void x((a=>a.includes(e)?a.filter((a=>a!==e)):[...a,e]));var e}})})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"avatar me-3",children:(0,o.jsx)("div",{className:"avatar-initials",children:((null===(s=a.first_name)||void 0===s?void 0:s[0])||"")+((null===(t=a.last_name)||void 0===t?void 0:t[0])||"")})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"fw-medium",children:[a.first_name," ",a.last_name]})})]})}),(0,o.jsx)("td",{children:a.email}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"badge bg-light text-dark",children:a.job_type||"N/A"})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"badge bg-".concat(n.class),children:n.label})}),(0,o.jsx)("td",{children:a.last_login?new Date(a.last_login).toLocaleDateString():e("common.never")}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsx)("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:e("manager.techManagement.actions")}),(0,o.jsxs)("ul",{className:"dropdown-menu",children:["pending"===n.key&&(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>U(a,"reinvite"),children:[(0,o.jsx)("i",{className:"bi bi-envelope me-2"}),e("manager.techManagement.reinvite")]})}),"deactivated"===n.key&&(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>U(a,"activate"),children:[(0,o.jsx)("i",{className:"bi bi-check-circle me-2"}),e("manager.techManagement.activate")]})}),"active"===n.key&&(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>U(a,"deactivate"),children:[(0,o.jsx)("i",{className:"bi bi-pause-circle me-2"}),e("manager.techManagement.deactivate")]})}),(0,o.jsx)("li",{children:(0,o.jsx)("hr",{className:"dropdown-divider"})}),(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:"dropdown-item text-danger",onClick:()=>U(a,"remove"),children:[(0,o.jsx)("i",{className:"bi bi-trash me-2"}),e("manager.techManagement.remove")]})})]})]})})]},a.id)}))})]})})})}),w&&(0,o.jsx)(d,{show:w,onHide:()=>k(!1),onSuccess:()=>{k(!1),T({type:"success",message:e("manager.techManagement.inviteForm.invitationSent")})}}),A&&(0,o.jsx)(u,{type:A.type,message:A.message,show:!0,onClose:()=>T(null)})]})},v=()=>{const{t:e}=(0,n.ok)(),{user:a}=(0,c.As)(),{companyProfile:s,loadingCompany:l,companyError:r,fetchCompanyProfile:d}=(0,i.zS)(),{validateAccess:h}=m(),[g,x]=(0,t.useState)(null);(0,t.useEffect)((()=>{console.log("CompanyProfile: Component mounted, fetching company profile..."),d()}),[d]),(0,t.useEffect)((()=>{h()||x({type:"error",message:e("common.insufficientPermissions"),duration:5e3})}),[h,e]);return l?(0,o.jsx)("div",{className:"company-profile-container",children:(0,o.jsx)("div",{className:"loading-spinner",children:(0,o.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,o.jsx)("span",{className:"visually-hidden",children:e("common.loading")})})})}):r?(0,o.jsx)("div",{className:"company-profile-container",children:(0,o.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,o.jsx)("h4",{className:"alert-heading",children:e("common.error")}),(0,o.jsx)("p",{children:r}),(0,o.jsx)("button",{className:"btn btn-outline-danger",onClick:d,children:e("common.retry")})]})}):(0,o.jsxs)("div",{className:"company-profile-container",children:[g&&(0,o.jsx)(u,{type:g.type,message:g.message,duration:g.duration,onClose:()=>x(null)}),(0,o.jsxs)("div",{className:"card shadow-sm border mb-4",children:[(0,o.jsx)("div",{className:"card-header bg-primary text-white",children:(0,o.jsxs)("h3",{className:"card-title mb-0",children:[(0,o.jsx)("i",{className:"fas fa-building me-2"}),e("manager.companyProfile.title")]})}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsxs)("strong",{children:[e("manager.companyProfile.companyName"),":"]}),(0,o.jsx)("span",{className:"ms-2",children:(null===s||void 0===s?void 0:s.name)||e("common.notAvailable")})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsxs)("strong",{children:[e("manager.companyProfile.managerName"),":"]}),(0,o.jsx)("span",{className:"ms-2",children:null!==a&&void 0!==a&&a.first_name&&null!==a&&void 0!==a&&a.last_name?"".concat(a.first_name," ").concat(a.last_name):(null===a||void 0===a?void 0:a.email)||e("common.notAvailable")})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsxs)("strong",{children:[e("manager.companyProfile.technicianCount"),":"]}),(0,o.jsx)("span",{className:"ms-2",children:"0"})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsxs)("strong",{children:[e("manager.companyProfile.rateSheet"),":"]}),(0,o.jsxs)("div",{className:"ms-2 d-inline-block",children:[(0,o.jsxs)("button",{className:"btn btn-outline-primary btn-sm me-2",disabled:!0,children:[(0,o.jsx)("i",{className:"fas fa-upload me-1"}),e("manager.companyProfile.uploadRateSheet")]}),(0,o.jsx)("small",{className:"text-muted",children:e("manager.companyProfile.rateSheetNote")})]})]})})]})]})]}),(0,o.jsxs)("div",{className:"card shadow-sm border",children:[(0,o.jsx)("div",{className:"card-header bg-secondary text-white",children:(0,o.jsxs)("h3",{className:"card-title mb-0",children:[(0,o.jsx)("i",{className:"fas fa-cog me-2"}),e("manager.settings.title")]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("i",{className:"fas fa-tools fa-3x text-muted mb-3"}),(0,o.jsx)("p",{className:"text-muted mb-0",children:e("manager.settings.comingSoon")})]})})]})]})},b=()=>{const{t:e}=(0,n.ok)(),{validateAccess:a}=m();return a()?(0,o.jsxs)("div",{className:"invoicing-container",children:[(0,o.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"h2 mb-1",children:e("manager.invoicing.title")}),(0,o.jsx)("p",{className:"text-muted mb-0",children:e("manager.invoicing.subtitle")})]})}),(0,o.jsxs)("div",{className:"card shadow-sm border",children:[(0,o.jsx)("div",{className:"card-header bg-primary text-white",children:(0,o.jsxs)("h3",{className:"card-title mb-0",children:[(0,o.jsx)("i",{className:"fas fa-file-invoice me-2"}),e("manager.invoicing.title")]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"text-center py-5",children:[(0,o.jsx)("i",{className:"fas fa-file-invoice fa-4x text-muted mb-4"}),(0,o.jsx)("h4",{className:"text-muted mb-3",children:e("manager.invoicing.comingSoon")}),(0,o.jsx)("p",{className:"text-muted",children:e("manager.invoicing.description")})]})})]})]}):null},p=()=>{const{t:e}=(0,n.ok)(),{validateAccess:a}=m();return a()?(0,o.jsxs)("div",{className:"job-tickets-container",children:[(0,o.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"h2 mb-1",children:e("manager.jobTickets.title")}),(0,o.jsx)("p",{className:"text-muted mb-0",children:e("manager.jobTickets.subtitle")})]})}),(0,o.jsxs)("div",{className:"card shadow-sm border",children:[(0,o.jsx)("div",{className:"card-header bg-success text-white",children:(0,o.jsxs)("h3",{className:"card-title mb-0",children:[(0,o.jsx)("i",{className:"fas fa-clipboard-list me-2"}),e("manager.jobTickets.title")]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"text-center py-5",children:[(0,o.jsx)("i",{className:"fas fa-clipboard-list fa-4x text-muted mb-4"}),(0,o.jsx)("h4",{className:"text-muted mb-3",children:e("manager.jobTickets.comingSoon")}),(0,o.jsx)("p",{className:"text-muted",children:e("manager.jobTickets.description")})]})})]})]}):null},N=()=>{const{t:e}=(0,n.ok)(),{auditLogs:a,loadingAuditLogs:s,auditError:c}=(0,i.zS)(),{validateAccess:d}=m(),[h,g]=(0,t.useState)([]),[x,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)(null),[p,N]=(0,t.useState)(null),[f,y]=(0,t.useState)({category:"",action:"",user:"",dateFrom:"",dateTo:"",search:""}),[w,k]=(0,t.useState)({page:1,limit:50,total:0,totalPages:0}),[C,M]=(0,t.useState)("timestamp"),[A,T]=(0,t.useState)("desc"),[L,_]=(0,t.useState)(!1),E=(0,t.useCallback)((async()=>{const{hasAccess:a}=await d("audit_logs");if(a){j(!0),b(null);try{const e=(0,l.A)({page:w.page,limit:w.limit,sort_by:C,sort_order:A},f);Object.keys(e).forEach((a=>{e[a]||delete e[a]}));const a=await(0,r.Dn)(e);if(!a.success)throw new Error(a.error||"Failed to fetch audit logs");g(a.logs||[]),k((e=>(0,l.A)((0,l.A)({},e),{},{total:a.total||0,totalPages:Math.ceil((a.total||0)/e.limit)})))}catch(v){console.error("Error loading audit logs:",v),b(v.message||e("common.errorOccurred"))}finally{j(!1)}}else b(e("common.accessDenied"))}),[w.page,w.limit,C,A,f,d,e]);(0,t.useEffect)((()=>{E()}),[E]);const S=(e,a)=>{y((s=>(0,l.A)((0,l.A)({},s),{},{[e]:a}))),k((e=>(0,l.A)((0,l.A)({},e),{},{page:1})))},F=e=>{C===e?T((e=>"asc"===e?"desc":"asc")):(M(e),T("desc")),k((e=>(0,l.A)((0,l.A)({},e),{},{page:1})))},I=e=>{k((a=>(0,l.A)((0,l.A)({},a),{},{page:e})))},P=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"security":return"bg-danger";case"user":return"bg-primary";case"company":return"bg-info";case"technician":return"bg-success";case"system":return"bg-secondary";default:return"bg-light text-dark"}},{categories:D,actions:O,users:U}={categories:[...new Set(h.map((e=>e.category)).filter(Boolean))],actions:[...new Set(h.map((e=>e.action)).filter(Boolean))],users:[...new Set(h.map((e=>e.user_name||e.user_email)).filter(Boolean))]};return(0,o.jsxs)("div",{className:"audit-logs",children:[(0,o.jsx)("div",{className:"logs-header mb-4",children:(0,o.jsxs)("div",{className:"row align-items-center",children:[(0,o.jsxs)("div",{className:"col",children:[(0,o.jsx)("h2",{className:"h4 mb-1",children:e("manager.auditLogs.title")}),(0,o.jsx)("p",{className:"text-muted mb-0",children:e("manager.auditLogs.subtitle")})]}),(0,o.jsx)("div",{className:"col-auto",children:(0,o.jsx)("button",{className:"btn btn-outline-primary",onClick:async()=>{const{hasAccess:a}=await d("data_export");if(a){_(!0);try{const a=(0,l.A)((0,l.A)({},f),{},{sort_by:C,sort_order:A});Object.keys(a).forEach((e=>{a[e]||delete a[e]}));const s=await(0,r.d8)(a);if(!s.success)throw new Error(s.error||"Export failed");{const a=new Blob([s.csv],{type:"text/csv"}),t=window.URL.createObjectURL(a),n=document.createElement("a");n.href=t,n.download="audit-logs-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(t),N({type:"success",message:e("manager.auditLogs.messages.exportSuccess")})}}catch(v){console.error("Error exporting audit logs:",v),N({type:"error",message:v.message||e("common.errorOccurred")})}finally{_(!1)}}else N({type:"error",message:e("common.accessDenied")})},disabled:L||0===h.length,children:L?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),e("manager.auditLogs.exporting")]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"bi bi-download me-2"}),e("manager.auditLogs.exportLogs")]})})})]})}),(0,o.jsx)("div",{className:"filters-section card mb-4",children:(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsxs)("div",{className:"row g-3 align-items-end",children:[(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("manager.auditLogs.filters.category")}),(0,o.jsxs)("select",{className:"form-select",value:f.category,onChange:e=>S("category",e.target.value),children:[(0,o.jsx)("option",{value:"",children:e("common.all")}),Object.values(r.dU).map((a=>(0,o.jsx)("option",{value:a,children:e("manager.auditLogs.categories.".concat(a.toLowerCase()))},a)))]})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("manager.auditLogs.filters.action")}),(0,o.jsxs)("select",{className:"form-select",value:f.action,onChange:e=>S("action",e.target.value),children:[(0,o.jsx)("option",{value:"",children:e("common.all")}),O.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("manager.auditLogs.filters.user")}),(0,o.jsxs)("select",{className:"form-select",value:f.user,onChange:e=>S("user",e.target.value),children:[(0,o.jsx)("option",{value:"",children:e("common.all")}),U.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("manager.auditLogs.filters.dateFrom")}),(0,o.jsx)("input",{type:"date",className:"form-control",value:f.dateFrom,onChange:e=>S("dateFrom",e.target.value)})]}),(0,o.jsxs)("div",{className:"col-md-2",children:[(0,o.jsx)("label",{className:"form-label",children:e("manager.auditLogs.filters.dateTo")}),(0,o.jsx)("input",{type:"date",className:"form-control",value:f.dateTo,onChange:e=>S("dateTo",e.target.value)})]}),(0,o.jsx)("div",{className:"col-md-2",children:(0,o.jsxs)("div",{className:"d-flex gap-2",children:[(0,o.jsx)("button",{className:"btn btn-outline-secondary",onClick:()=>{y({category:"",action:"",user:"",dateFrom:"",dateTo:"",search:""}),k((e=>(0,l.A)((0,l.A)({},e),{},{page:1})))},title:e("manager.auditLogs.clearFilters"),children:(0,o.jsx)("i",{className:"bi bi-x-circle"})}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:E,disabled:x,title:e("common.refresh"),children:(0,o.jsx)("i",{className:"bi bi-arrow-clockwise"})})]})})]}),(0,o.jsxs)("div",{className:"row g-3 mt-2",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:e("manager.auditLogs.filters.searchPlaceholder"),value:f.search,onChange:e=>S("search",e.target.value)})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,o.jsx)("small",{className:"text-muted",children:e("manager.auditLogs.totalLogs",{count:w.total})}),(0,o.jsxs)("select",{className:"form-select form-select-sm",style:{width:"auto"},value:w.limit,onChange:e=>k((a=>(0,l.A)((0,l.A)({},a),{},{limit:parseInt(e.target.value),page:1}))),children:[(0,o.jsx)("option",{value:25,children:"25"}),(0,o.jsx)("option",{value:50,children:"50"}),(0,o.jsx)("option",{value:100,children:"100"})]}),(0,o.jsx)("small",{className:"text-muted",children:e("manager.auditLogs.perPage")})]})})]})]})}),(0,o.jsx)("div",{className:"logs-table card",children:(0,o.jsx)("div",{className:"card-body p-0",children:x?(0,o.jsxs)("div",{className:"text-center py-5",children:[(0,o.jsx)("div",{className:"spinner-border",role:"status",children:(0,o.jsx)("span",{className:"visually-hidden",children:e("manager.auditLogs.messages.loadingLogs")})}),(0,o.jsx)("p",{className:"mt-2 text-muted",children:e("manager.auditLogs.messages.loadingLogs")})]}):v?(0,o.jsxs)("div",{className:"alert alert-danger m-3",role:"alert",children:[(0,o.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),v]}):0===h.length?(0,o.jsxs)("div",{className:"text-center py-5",children:[(0,o.jsx)("i",{className:"bi bi-journal-text display-1 text-muted"}),(0,o.jsx)("p",{className:"mt-3 text-muted",children:e("manager.auditLogs.messages.noLogsFound")})]}):(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"table table-hover mb-0",children:[(0,o.jsx)("thead",{className:"table-light",children:(0,o.jsxs)("tr",{children:[(0,o.jsxs)("th",{className:"sortable",onClick:()=>F("timestamp"),children:[e("manager.auditLogs.timestamp"),"timestamp"===C&&(0,o.jsx)("i",{className:"bi bi-arrow-".concat("asc"===A?"up":"down"," ms-1")})]}),(0,o.jsxs)("th",{className:"sortable",onClick:()=>F("category"),children:[e("manager.auditLogs.category"),"category"===C&&(0,o.jsx)("i",{className:"bi bi-arrow-".concat("asc"===A?"up":"down"," ms-1")})]}),(0,o.jsxs)("th",{className:"sortable",onClick:()=>F("action"),children:[e("manager.auditLogs.action"),"action"===C&&(0,o.jsx)("i",{className:"bi bi-arrow-".concat("asc"===A?"up":"down"," ms-1")})]}),(0,o.jsxs)("th",{className:"sortable",onClick:()=>F("user_name"),children:[e("manager.auditLogs.user"),"user_name"===C&&(0,o.jsx)("i",{className:"bi bi-arrow-".concat("asc"===A?"up":"down"," ms-1")})]}),(0,o.jsx)("th",{children:e("manager.auditLogs.description")}),(0,o.jsx)("th",{children:e("manager.auditLogs.ipAddress")})]})}),(0,o.jsx)("tbody",{children:h.map((a=>{const s=(e=>{const a=new Date(e.timestamp).toLocaleString(),s=e.category||"System",t=e.action||"Unknown",n=e.user_name||e.user_email||"System",i=e.details?JSON.stringify(e.details,null,2):"";return(0,l.A)((0,l.A)({},e),{},{formattedTimestamp:a,formattedCategory:s,formattedAction:t,formattedUser:n,formattedDetails:i})})(a);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("small",{className:"text-muted",children:s.formattedTimestamp})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"badge ".concat(P(a.category)),children:e("manager.auditLogs.categories.".concat((a.category||"system").toLowerCase()))})}),(0,o.jsx)("td",{children:(0,o.jsx)("code",{className:"small",children:a.action})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[(0,o.jsx)("div",{className:"avatar-sm me-2",children:(0,o.jsx)("div",{className:"avatar-initials-sm",children:(s.formattedUser[0]||"S").toUpperCase()})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"small fw-medium",children:s.formattedUser})})]})}),(0,o.jsxs)("td",{children:[(0,o.jsxs)("div",{className:"log-description",children:[a.description||a.action,a.details&&(0,o.jsx)("button",{className:"btn btn-link btn-sm p-0 ms-2",type:"button","data-bs-toggle":"collapse","data-bs-target":"#details-".concat(a.id),"aria-expanded":"false",children:(0,o.jsx)("i",{className:"bi bi-info-circle"})})]}),a.details&&(0,o.jsx)("div",{className:"collapse mt-2",id:"details-".concat(a.id),children:(0,o.jsx)("div",{className:"card card-body small",children:(0,o.jsx)("pre",{className:"mb-0",children:s.formattedDetails})})})]}),(0,o.jsx)("td",{children:(0,o.jsx)("small",{className:"text-muted font-monospace",children:a.ip_address||"N/A"})})]},a.id)}))})]})})})}),w.totalPages>1&&(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[(0,o.jsx)("div",{children:(0,o.jsx)("small",{className:"text-muted",children:e("manager.auditLogs.showingResults",{start:(w.page-1)*w.limit+1,end:Math.min(w.page*w.limit,w.total),total:w.total})})}),(0,o.jsx)("nav",{children:(0,o.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[(0,o.jsx)("li",{className:"page-item ".concat(1===w.page?"disabled":""),children:(0,o.jsx)("button",{className:"page-link",onClick:()=>I(w.page-1),disabled:1===w.page,children:(0,o.jsx)("i",{className:"bi bi-chevron-left"})})}),Array.from({length:Math.min(5,w.totalPages)},((e,a)=>{const s=Math.max(1,Math.min(w.totalPages-4,w.page-2))+a;return(0,o.jsx)("li",{className:"page-item ".concat(w.page===s?"active":""),children:(0,o.jsx)("button",{className:"page-link",onClick:()=>I(s),children:s})},s)})),(0,o.jsx)("li",{className:"page-item ".concat(w.page===w.totalPages?"disabled":""),children:(0,o.jsx)("button",{className:"page-link",onClick:()=>I(w.page+1),disabled:w.page===w.totalPages,children:(0,o.jsx)("i",{className:"bi bi-chevron-right"})})})]})})]}),p&&(0,o.jsx)(u,{type:p.type,message:p.message,show:!0,onClose:()=>N(null)})]})},f=["title","titleId"];const y=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,f);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}));var w=s(2704);const k=["title","titleId"];const C=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,k);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"}))})),M=["title","titleId"];const A=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,M);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))})),T=["title","titleId"];const L=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,T);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}))})),_=["title","titleId"];const E=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,_);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}));var S=s(9265);const F=["title","titleId"];const I=t.forwardRef((function(e,a){let{title:s,titleId:n}=e,i=(0,h.A)(e,F);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":n},i),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}));var P=s(911);const D=e=>{let{stats:a,setActiveTab:s}=e;const{t:t}=(0,n.ok)(),{user:i}=(0,c.As)(),l=[{title:t("manager.totalTechnicians"),value:(null===a||void 0===a?void 0:a.totalTechnicians)||0,icon:L,color:"blue",description:t("manager.activeTechnicians")},{title:t("manager.totalWorkHours"),value:(null===a||void 0===a?void 0:a.totalWorkHours)||0,icon:E,color:"yellow",description:t("manager.thisMonth")},{title:t("manager.completedJobs"),value:(null===a||void 0===a?void 0:a.completedJobs)||0,icon:C,color:"green",description:t("manager.thisMonth")}];return(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-white mb-2",children:[t("common.welcome"),", ",null===i||void 0===i?void 0:i.name,"!"]}),(0,o.jsx)("p",{className:"text-gray-400",children:t("manager.overviewDescription")})]}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:l.map(((e,a)=>{const s=e.icon;return(0,o.jsx)("div",{className:"bg-gray-700 rounded-lg p-6 border border-gray-600",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-gray-400 text-sm font-medium",children:e.title}),(0,o.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:e.value}),(0,o.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:e.description})]}),(0,o.jsx)("div",{className:"p-3 rounded-full ".concat({blue:"bg-blue-600 text-blue-100",yellow:"bg-yellow-600 text-yellow-100",green:"bg-green-600 text-green-100"}[e.color]),children:(0,o.jsx)(s,{className:"h-6 w-6"})})]})},a)}))}),(0,o.jsx)(O,{setActiveTab:s})]})},O=e=>{let{setActiveTab:a}=e;const{t:s}=(0,n.ok)();return(0,o.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 border border-gray-600",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:s("manager.quickActions")}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,o.jsxs)("button",{className:"flex items-center p-4 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors duration-200",children:[(0,o.jsx)(L,{className:"h-5 w-5 text-white mr-3"}),(0,o.jsx)("span",{className:"text-white font-medium",children:s("manager.inviteTechnician")})]}),(0,o.jsxs)("button",{className:"flex items-center p-4 bg-gray-500 hover:bg-gray-600 rounded-lg transition-colors duration-200",children:[(0,o.jsx)(A,{className:"h-5 w-5 text-white mr-3"}),(0,o.jsx)("span",{className:"text-white font-medium",children:s("manager.updateCompany")})]}),(0,o.jsxs)("button",{className:"flex items-center p-4 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors duration-200",children:[(0,o.jsx)(C,{className:"h-5 w-5 text-white mr-3"}),(0,o.jsx)("span",{className:"text-white font-medium",children:s("audit.viewReports")})]}),(0,o.jsxs)("button",{className:"flex items-center p-4 bg-green-600 hover:bg-green-700 rounded-lg transition-colors duration-200",onClick:()=>a("invoicing"),children:[(0,o.jsx)(C,{className:"h-5 w-5 text-white mr-3"}),(0,o.jsx)("span",{className:"text-white font-medium",children:s("manager.createInvoice")})]}),(0,o.jsxs)("button",{className:"flex items-center p-4 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors duration-200",onClick:()=>a("jobTickets"),children:[(0,o.jsx)(C,{className:"h-5 w-5 text-white mr-3"}),(0,o.jsx)("span",{className:"text-white font-medium",children:s("manager.createJobTicket")})]}),(0,o.jsxs)("button",{className:"relative flex items-center p-4 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl overflow-hidden group",style:{background:"linear-gradient(135deg, #39b198 0%, #2d8a73 100%)",boxShadow:"0 4px 15px rgba(57, 177, 152, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)"},children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 group-hover:opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-all duration-700"}),(0,o.jsx)("svg",{className:"h-5 w-5 text-white mr-3 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,o.jsx)("span",{className:"text-white font-medium relative z-10",children:"PatchAI"})]})]})]})},U=()=>{var e,a,s,l;const{t:r}=(0,n.ok)(),{hasManagerAccess:d,getTechnicianStats:h}=(0,i.zS)(),{validateAccess:g}=m(),{user:x,logout:u}=(0,c.As)(),[f,k]=(0,t.useState)("overview"),[M,T]=(0,t.useState)(!1),[_,F]=(0,t.useState)(null),[O,U]=(0,t.useState)(!1),H=(0,t.useRef)(),R=(0,t.useRef)();(0,t.useEffect)((()=>{(async()=>{const{hasAccess:e,reason:a}=await g("manager_features");e?T(!0):F(a)})()}),[g]),(0,t.useEffect)((()=>{const e=e=>{window.innerWidth>=768||O&&R.current&&!R.current.contains(e.target)&&H.current&&!H.current.contains(e.target)&&U(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[O]);const z=[{id:"overview",label:r("manager.overview"),icon:y,component:(0,o.jsx)(D,{stats:h(),setActiveTab:k})},{id:"invoicing",label:r("manager.invoicing.title"),icon:w.A,component:(0,o.jsx)(b,{})},{id:"jobTickets",label:r("manager.jobTickets.title"),icon:C,component:(0,o.jsx)(p,{})},{id:"company",label:r("manager.company"),icon:A,component:(0,o.jsx)(v,{})},{id:"technicians",label:r("manager.technicians"),icon:L,component:(0,o.jsx)(j,{})},{id:"audit",label:r("audit.title"),icon:E,component:(0,o.jsx)(N,{})}];return _?(0,o.jsx)("div",{className:"bg-slate-900 min-h-screen flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:r("common.accessDenied")}),(0,o.jsx)("p",{className:"text-gray-400 mb-4",children:_}),(0,o.jsx)("p",{className:"text-gray-500",children:r("common.contactAdmin")})]})}):M?(0,o.jsxs)("div",{className:"bg-slate-900 min-h-screen",children:[(0,o.jsx)("div",{className:"h-14 relative",children:(0,o.jsx)(P.A,{})}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("button",{ref:H,className:"md:hidden fixed top-4 left-4 z-50 p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700",onClick:()=>U(!O),children:(0,o.jsx)(S.A,{className:"h-6 w-6","aria-hidden":"true"})}),(0,o.jsx)("div",{ref:R,className:"".concat(O?"translate-x-0":"-translate-x-full"," md:translate-x-0 transition-transform duration-300 ease-in-out fixed md:static inset-y-0 left-0 z-40 w-64 bg-gray-800 border-r border-gray-700 h-screen"),children:(0,o.jsxs)("div",{className:"flex h-full flex-col gap-y-3 md:gap-y-4 overflow-y-auto px-6 py-4 pt-16 md:pt-4",children:[(0,o.jsx)("div",{className:"flex h-16 shrink-0 items-center",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(A,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-white",children:(null===x||void 0===x?void 0:x.company_name)||r("manager.dashboard")}),(0,o.jsx)("p",{className:"text-sm text-gray-400",children:r("manager.portal")})]})]})}),(0,o.jsx)("nav",{className:"flex flex-1 flex-col",children:(0,o.jsxs)("ul",{className:"flex flex-1 flex-col gap-y-4 md:gap-y-5",children:[(0,o.jsx)("li",{children:(0,o.jsx)("ul",{className:"-mx-2 space-y-1",children:z.map((e=>{const a=e.icon;return(0,o.jsx)("li",{children:(0,o.jsxs)("button",{onClick:()=>{k(e.id),U(!1)},className:"".concat(f===e.id?"bg-gray-700 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"," group flex w-full gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors duration-200"),children:[(0,o.jsx)(a,{className:"h-6 w-6 shrink-0","aria-hidden":"true"}),e.label]})},e.id)}))})}),(0,o.jsx)("li",{className:"mt-auto",children:(0,o.jsxs)("div",{className:"border-t border-gray-700 pt-3 md:pt-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-x-3 mb-2 md:mb-3",children:[(0,o.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600",children:(0,o.jsx)("span",{className:"text-sm font-medium text-white",children:(null===x||void 0===x||null===(e=x.name)||void 0===e||null===(a=e.charAt(0))||void 0===a?void 0:a.toUpperCase())||"M"})}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-white truncate",children:(null===x||void 0===x?void 0:x.name)||r("common.manager")}),(0,o.jsx)("p",{className:"text-xs text-gray-400 truncate",children:null===x||void 0===x?void 0:x.email})]})]}),(0,o.jsxs)("button",{onClick:u,className:"group flex w-full gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-200",children:[(0,o.jsx)(I,{className:"h-6 w-6 shrink-0","aria-hidden":"true"}),r("auth.logout")]})]})})]})})]})}),(0,o.jsx)("main",{className:"flex-1 bg-slate-900 p-6 overflow-y-auto text-white",children:(0,o.jsx)("div",{className:"mt-2 md:mt-0 pl-14 md:pl-0 md:ml-64",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-white",children:null===(s=z.find((e=>e.id===f)))||void 0===s?void 0:s.label}),(0,o.jsxs)("p",{className:"text-gray-400 mt-2",children:["overview"===f&&r("manager.dashboardSubtitle"),"technicians"===f&&r("manager.manageTechnicians"),"invoicing"===f&&r("manager.invoicing.subtitle"),"jobTickets"===f&&r("manager.jobTickets.subtitle"),"company"===f&&r("manager.manageCompany"),"audit"===f&&r("audit.viewLogs")]})]}),(0,o.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-xl",children:null===(l=z.find((e=>e.id===f)))||void 0===l?void 0:l.component})]})})})]})]}):(0,o.jsx)("div",{className:"bg-slate-900 min-h-screen flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-400",children:r("common.loading")})]})})}},9265:(e,a,s)=>{s.d(a,{A:()=>l});var t=s(3986),n=s(5043);const i=["title","titleId"];const l=n.forwardRef((function(e,a){let{title:s,titleId:l}=e,c=(0,t.A)(e,i);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":l},c),s?n.createElement("title",{id:l},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}))}}]);
//# sourceMappingURL=manager-dashboard.8188c1f2.chunk.js.map
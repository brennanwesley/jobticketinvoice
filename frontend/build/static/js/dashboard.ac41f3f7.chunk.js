"use strict";(self.webpackChunkjobticketinvoice_frontend=self.webpackChunkjobticketinvoice_frontend||[]).push([[138,206,269,700,816,945],{787:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(5043),r=s(8729),n=s(2136),l=s(3059),i=s(3526),c=s(1086),o=s(579);const d=()=>{const{user:e}=(0,r.As)(),{t:t}=(0,n.ok)(),{selectedDraftTicket:s,ticketMode:d}=(0,l.yS)(),m=(0,a.useMemo)((()=>({pump_tech:c.zh,driver:c.Vq,manual:c.T4})),[]),x=(0,a.useMemo)((()=>{if("manual"===d)return"manual";if(!e||!e.job_type)return"pump_tech";const t=e.job_type.toLowerCase().replace(/[\s_-]/g,"_");return{pump_technician:"pump_tech",pumptechnician:"pump_tech",pumptech:"pump_tech",pump_service_technician:"pump_tech",pump_service_tech:"pump_tech"}[t]||t}),[e,d]),h=(0,a.useMemo)((()=>m[x]||c.zh),[m,x]),u=(0,a.useMemo)((()=>s||{}),[s]),p=(0,a.useMemo)((()=>performance.now()),[]);return a.useEffect((()=>{const e=performance.now()-p;return console.log("JobTicketForm (".concat(x,") rendered in ").concat(e.toFixed(2),"ms")),()=>{performance.clearMarks("form-render-".concat(x))}}),[p,x]),(0,o.jsxs)("div",{className:"py-6 px-4",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:t("jobTicket.createNew")}),s&&(0,o.jsxs)(i.Zp,{className:"bg-blue-500 bg-opacity-20 border border-blue-500 text-blue-500 px-4 py-3 mb-6",children:[(0,o.jsx)("p",{children:t("jobTicket.editingDraft")}),(0,o.jsxs)("p",{className:"text-sm mt-1",children:[t("jobTicket.draftId"),": ",s.id.substring(0,8)]})]}),(0,o.jsx)(a.Suspense,{fallback:(0,o.jsx)("div",{className:"flex justify-center py-8",children:(0,o.jsx)(i.kt,{size:"lg"})}),children:(0,o.jsx)(h,{draftData:u})})]})},m=a.memo(d)},911:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043),r=s(2136),n=s(579);const l=()=>{const{language:e,toggleLanguage:t}=(0,r.ok)(),s="en"===e?"Espa\xf1ol":"English",a="es"===e?"click for":"haga clic para";return(0,n.jsxs)("button",{onClick:t,className:"absolute top-0 right-0 m-4 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors flex items-center focus:outline-none focus:ring-2 focus:ring-orange-700","aria-label":"".concat(a," ").concat(s),title:"".concat(a," ").concat(s),tabIndex:0,children:[(0,n.jsx)("span",{className:"text-xs italic text-white mr-1",children:a}),(0,n.jsx)("span",{children:s})]})},i=(0,a.memo)(l)},948:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(5043),r=s(2136),n=s(3059),l=s(3526),i=(s(2376),s(579));const c=()=>{const{t:e}=(0,r.ok)(),{draftTickets:t,setSelectedDraftTicket:s,setViewMode:c,deleteDraftTicket:d,setTicketMode:m}=(0,n.yS)(),[x,h]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),j=(0,a.useCallback)((e=>{if(!e)return"-";try{return e}catch(t){return e}}),[]),g=((0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length>t?"".concat(e.substring(0,t),"..."):e:""}),[]),(0,a.useCallback)((e=>{s(e),c("draft")}),[s,c])),b=(0,a.useCallback)((e=>{p(e),h(!0)}),[p]),f=(0,a.useCallback)((()=>{u&&(s(u),m("manual"),c("form"),d(u.id)),h(!1)}),[u,s,m,c,d]),y=(0,a.useCallback)((()=>{p(null),h(!1)}),[]),v=(0,a.useCallback)((e=>{d(e)}),[d]);return(0,i.jsxs)("div",{className:"py-6 px-4",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:e("jobTicket.drafts")}),(0,i.jsx)(l.Zp,{className:"overflow-hidden",children:(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider w-24",children:e("common.edit")}),(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-24 sm:w-auto",children:e("jobTicket.date")}),(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-48 sm:w-1/4",children:e("jobTicket.company")}),(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-48 sm:w-1/4",children:e("jobTicket.location")}),(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-16 sm:w-auto",children:e("jobTicket.hours")}),(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:e("jobTicket.description")}),(0,i.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:e("common.actions")})]})}),0===t.length?(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"7",className:"px-6 py-4",children:(0,i.jsx)("div",{className:"text-center py-8",children:(0,i.jsx)("p",{className:"text-gray-400",children:e("jobTicket.noDrafts")})})})})}):(0,i.jsx)("tbody",{className:"divide-y divide-gray-700",children:(0,i.jsx)(l.wj,{items:t,height:400,itemHeight:64,renderItem:t=>(0,i.jsx)(o,{ticket:t,formatDate:j,handleEditTicket:b,handleViewTicket:g,handleDeleteTicket:v,t:e},t.id),overscan:5,emptyComponent:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"7",className:"px-6 py-4",children:(0,i.jsx)("div",{className:"text-center py-8",children:(0,i.jsx)(l.kt,{size:"md"})})})})})})]})})}),(0,i.jsx)(l.aF,{isOpen:x,onClose:y,title:e("jobTicket.editConfirmation"),size:"md",footer:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.$n,{variant:"secondary",onClick:y,children:e("common.no")}),(0,i.jsx)(l.$n,{variant:"primary",onClick:f,className:"ml-3",children:e("common.yes")})]}),children:(0,i.jsx)("p",{children:e("jobTicket.editConfirmationMessage")})})]})},o=a.memo((e=>{let{ticket:t,formatDate:s,handleEditTicket:a,handleViewTicket:r,handleDeleteTicket:n,t:c}=e;return(0,i.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:(0,i.jsx)(l.$n,{variant:"outline",size:"sm",onClick:()=>a(t),className:"text-orange-500 hover:text-orange-400 font-medium","aria-label":"".concat(c("common.edit")," ").concat(t.companyName||c("jobTicket.untitledTicket")),children:c("common.edit")})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s(t.jobDate)}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,i.jsx)("div",{className:"truncate",children:t.companyName||c("jobTicket.untitledTicket")})}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,i.jsx)("div",{className:"truncate",children:t.location||"-"})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.workTotalHours||"0"}),(0,i.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,i.jsx)("div",{className:"truncate",children:t.workDescription||"-"})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[(0,i.jsx)(l.$n,{variant:"outline",size:"sm",onClick:()=>r(t),className:"text-blue-500 hover:text-blue-400","aria-label":"".concat(c("common.view")," ").concat(t.companyName||c("jobTicket.untitledTicket")),children:c("common.view")}),(0,i.jsx)(l.$n,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"text-red-500 hover:text-red-400","aria-label":"".concat(c("common.delete")," ").concat(t.companyName||c("jobTicket.untitledTicket")),children:c("common.delete")})]})})]})})),d=a.memo(c)},997:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(5043),r=s(3216),n=s(2704),l=s(4228),i=s(6510),c=s(5111),o=s(2136),d=s(3059),m=s(579);const x=()=>{const{t:e,language:t}=(0,o.ok)(),{setTicketMode:s,setViewMode:a}=(0,d.yS)(),x=(0,r.Zp)();return(0,m.jsxs)("div",{className:"relative flex flex-col items-center justify-center min-h-[80vh] px-4 py-8 overflow-hidden",children:[(0,m.jsxs)("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute -top-20 -left-20 w-64 h-64 rounded-full bg-orange-500 opacity-5"}),(0,m.jsx)("div",{className:"absolute -bottom-32 -right-32 w-96 h-96 rounded-full bg-orange-500 opacity-5"}),(0,m.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,m.jsx)(n.A,{className:"w-96 h-96 text-gray-700 opacity-[0.03]"})}),(0,m.jsx)("div",{className:"absolute top-1/4 right-1/4 w-20 h-20 rounded-lg rotate-45 bg-gray-600 opacity-[0.03]"}),(0,m.jsx)("div",{className:"absolute bottom-1/3 left-1/3 w-16 h-16 rounded-lg rotate-12 bg-gray-600 opacity-[0.03]"})]}),(0,m.jsxs)("div",{className:"relative z-10 w-full max-w-3xl mx-auto bg-gray-900 bg-opacity-60 backdrop-filter backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800 p-8 sm:p-10",children:[(0,m.jsxs)("div",{className:"text-center mb-8",children:[(0,m.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3",children:e("jobTicket.createNew")}),(0,m.jsx)("p",{className:"text-gray-300 text-sm sm:text-base max-w-md mx-auto",children:"en"===t?"Select how you would like to create your job ticket":"Seleccione c\xf3mo desea crear su boleta de trabajo"})]}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-stretch",children:[(0,m.jsxs)("button",{onClick:()=>{s("manual"),x("/dashboard/job-ticket-form")},className:"flex flex-col items-center justify-center p-6 sm:p-8 bg-gradient-to-br from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-700 hover:border-orange-500/30 w-full sm:w-1/2 group","aria-label":e("jobTicket.byHand"),children:[(0,m.jsx)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-4 rounded-full mb-4 group-hover:scale-110 transition-transform duration-300",children:(0,m.jsx)(l.A,{className:"h-8 w-8 text-white"})}),(0,m.jsx)("span",{className:"text-lg font-medium",children:e("jobTicket.byHand")}),(0,m.jsx)("span",{className:"text-sm text-gray-400 mt-2",children:"en"===t?"Fill out form manually":"Llenar formulario manualmente"})]}),(0,m.jsxs)("button",{onClick:()=>{s("voice"),x("/dashboard/voice-recorder")},className:"flex flex-col items-center justify-center p-6 sm:p-8 bg-gradient-to-br from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-700 hover:border-orange-500/30 w-full sm:w-1/2 group","aria-label":e("jobTicket.byVoice"),children:[(0,m.jsx)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-4 rounded-full mb-4 group-hover:scale-110 transition-transform duration-300",children:(0,m.jsx)(i.A,{className:"h-8 w-8 text-white"})}),(0,m.jsx)("span",{className:"text-lg font-medium",children:e("jobTicket.byVoice")}),(0,m.jsx)("span",{className:"text-sm text-gray-400 mt-2",children:"en"===t?"Create using voice commands":"Crear usando comandos de voz"})]})]})]}),(0,m.jsx)("div",{className:"fixed bottom-4 right-4 z-20",children:(0,m.jsxs)("button",{onClick:()=>{console.log("Help button clicked")},className:"flex items-center space-x-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-full transition-colors shadow-lg","aria-label":e("needHelp")||"Need Help?",children:[(0,m.jsx)(c.A,{className:"h-5 w-5 text-white"}),(0,m.jsx)("span",{className:"text-sm",children:e("needHelp")||("en"===t?"Need Help?":"\xbfNecesita Ayuda?")})]})})]})},h=(0,a.memo)(x)},1215:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(5043),r=s(3216),n=s(9265),l=s(2136),i=s(8729),c=s(3059),o=s(3526),d=s(3309),m=s(911),x=s(1086),h=s(579);const u=()=>{const{t:e}=(0,l.ok)(),{user:t}=(0,i.As)(),{draftData:s}=(0,c.yS)(),u=(0,r.Zp)(),[p,j]=(0,a.useState)(!0),[g,b]=(0,a.useState)(!1),f=(0,a.useRef)(),y=(0,a.useRef)(),v=(null===t||void 0===t?void 0:t.jobType)||"manual",k={pump_tech:x.zh,driver:x.Vq,roustabout:x.nZ,electrician:x.cx,pipeline_operator:x.zt,truck_driver:x.mO,other:x.pr,manual:x.T4}[v]||x.T4;(0,a.useEffect)((()=>{const e=setTimeout((()=>{j(!1)}),500);return()=>clearTimeout(e)}),[]),(0,a.useEffect)((()=>{const e=e=>{window.innerWidth>=768||g&&y.current&&!y.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[g]);return(0,h.jsxs)("div",{className:"bg-slate-900 min-h-screen",children:[(0,h.jsx)("div",{className:"h-14 relative",children:(0,h.jsx)(m.A,{})}),(0,h.jsxs)("div",{className:"flex",children:[(0,h.jsx)("button",{ref:f,className:"md:hidden fixed top-4 left-4 z-50 p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700",onClick:()=>b(!g),children:(0,h.jsx)(n.A,{className:"h-6 w-6","aria-hidden":"true"})}),(0,h.jsx)(d.A,{sidebarOpen:g,setSidebarOpen:b,ref:y}),(0,h.jsx)("main",{className:"flex-1 bg-slate-900 p-6 overflow-y-auto text-white",children:(0,h.jsx)("div",{className:"mt-2 md:mt-0 pl-14 md:pl-0 md:ml-64",children:(0,h.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,h.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,h.jsx)("button",{onClick:()=>{u("/dashboard/landing")},className:"mr-4 p-2 rounded-full hover:bg-gray-700 transition-colors","aria-label":e("common.back"),children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,h.jsx)("h1",{className:"text-2xl font-bold text-white",children:e("jobTicket.createNew")})]}),(0,h.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:p?(0,h.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,h.jsx)(o.kt,{size:"lg"})}):(0,h.jsx)(k,{draftData:s})})]})})})]})]})}},1847:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(5043),r=s(2136),n=s(8729),l=s(2376),i=s(3526),c=s(3986);const o=["title","titleId"];const d=a.forwardRef((function(e,t){let{title:s,titleId:r}=e,n=(0,c.A)(e,o);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}));var m=s(579);const x=()=>{const{t:e}=(0,r.ok)(),{user:t}=(0,n.As)(),{data:s,isLoading:c,error:o,refetch:x}=(0,l.Wl)("/api/job-tickets/?status=submitted",{cacheTime:18e4,onError:e=>console.error("Error fetching submitted tickets:",e)}),u=(null===s||void 0===s?void 0:s.data)||[],p=o?e("errors.fetchFailed"):null,j=(0,a.useCallback)((e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString()}catch(t){return e}}),[]),g=((0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length>t?"".concat(e.substring(0,t),"..."):e:""}),[]),(0,a.useCallback)((e=>{console.log("View ticket:",e)}),[])),b=(0,a.useMemo)((()=>u||[]),[u]);return(0,m.jsxs)("div",{className:"py-6 px-4",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:e("jobTicket.submitted")}),c?(0,m.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,m.jsx)(i.kt,{size:"lg",variant:"primary"})}):(0,m.jsx)(i.Zp,{className:"overflow-hidden",children:(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-24 sm:w-auto",children:e("jobTicket.date")}),(0,m.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-48 sm:w-1/4",children:e("jobTicket.company")}),(0,m.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-48 sm:w-1/4",children:e("jobTicket.location")}),(0,m.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-16 sm:w-auto",children:e("jobTicket.hours")}),(0,m.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:e("jobTicket.description")}),(0,m.jsx)("th",{className:"sticky top-0 bg-gray-800 px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider w-20",children:e("common.actions")})]})}),p?(0,m.jsx)("tbody",{children:(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"6",className:"px-6 py-4",children:(0,m.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-500",children:[(0,m.jsx)(d,{className:"h-5 w-5"}),(0,m.jsx)("span",{children:p}),(0,m.jsx)(i.$n,{variant:"outline",size:"sm",onClick:()=>x(),className:"ml-3",children:e("common.retry")})]})})})}):0===b.length?(0,m.jsx)("tbody",{children:(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"6",className:"px-6 py-4",children:(0,m.jsx)("div",{className:"text-center py-8",children:(0,m.jsx)("p",{className:"text-gray-400",children:e("jobTicket.noSubmitted")})})})})}):(0,m.jsx)("tbody",{className:"divide-y divide-gray-700",children:(0,m.jsx)(i.wj,{items:b,height:400,itemHeight:64,renderItem:t=>(0,m.jsx)(h,{ticket:t,formatDate:j,handleViewTicket:g,t:e},t.id),overscan:5,emptyComponent:(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"6",className:"px-6 py-4",children:(0,m.jsx)("div",{className:"text-center py-8",children:(0,m.jsx)(i.kt,{size:"md"})})})})})})]})})})]})},h=a.memo((e=>{let{ticket:t,formatDate:s,handleViewTicket:r,t:n}=e;const l=(0,a.useMemo)((()=>parseFloat(t.work_total_hours||0)+parseFloat(t.travel_total_hours||0)),[t.work_total_hours,t.travel_total_hours]);return(0,m.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s(t.job_date)}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,m.jsx)("div",{className:"truncate",children:t.company_name||n("jobTicket.untitledTicket")})}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,m.jsx)("div",{className:"truncate",children:t.location||"-"})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,m.jsx)("div",{className:"truncate",children:t.description||"-"})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,m.jsx)(i.$n,{variant:"outline",size:"sm",onClick:()=>r(t.id),className:"text-orange-500 hover:text-orange-400","aria-label":"".concat(n("common.view")," ").concat(t.company_name||n("jobTicket.untitledTicket")),children:n("common.view")})})]})})),u=a.memo(x)},7949:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(2555),r=s(5043),n=s(8729),l=s(2136),i=s(3526),c=s(579);const o=()=>{var e;const{user:t,updateUserProfile:s,isLoading:o}=(0,n.As)(),{t:d}=(0,l.ok)(),[m,x]=(0,r.useState)({name:"",email:"",job_type:"",preferred_language:"",phone:""}),[h,u]=(0,r.useState)(!1),[p,j]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null);(0,r.useEffect)((()=>{t&&x({name:t.name||"",email:t.email||"",job_type:t.job_type||"",preferred_language:t.preferred_language||"",phone:t.phone||""})}),[t]);const v=e=>{const{name:t,value:s}=e.target;x((e=>(0,a.A)((0,a.A)({},e),{},{[t]:s})))};return o?(0,c.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,c.jsx)(i.kt,{size:"lg"})}):(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,c.jsx)("h1",{className:"text-2xl font-bold mb-6",children:d("profile.title")||"Profile"}),g&&(0,c.jsx)(i.Zp,{className:"bg-green-900 bg-opacity-20 border border-green-700 mb-6",children:(0,c.jsx)("p",{className:"text-green-400 p-3",children:d("profile.saveSuccess")||"Profile updated successfully!"})}),f&&(0,c.jsx)(i.Zp,{className:"bg-red-900 bg-opacity-20 border border-red-700 mb-6",children:(0,c.jsx)("p",{className:"text-red-400 p-3",children:f})}),(0,c.jsx)(i.Zp,{className:"p-6",children:(0,c.jsx)("form",{onSubmit:async e=>{e.preventDefault(),j(!0),b(!1),y(null);try{await s(m),u(!1),b(!0),setTimeout((()=>{b(!1)}),3e3)}catch(t){console.error("Error updating profile:",t),y(t.message||"Failed to update profile")}finally{j(!1)}},children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)("div",{className:"flex justify-center mb-6",children:(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("div",{className:"h-24 w-24 rounded-full bg-slate-700 flex items-center justify-center",children:null!==t&&void 0!==t&&t.logo_url?(0,c.jsx)("img",{src:t.logo_url,alt:t.name,className:"h-24 w-24 rounded-full object-cover"}):(0,c.jsx)("span",{className:"text-3xl text-gray-400",children:(null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.charAt(0))||"?"})}),h&&(0,c.jsx)("button",{type:"button",className:"absolute bottom-0 right-0 rounded-full bg-orange-600 p-1 text-white",onClick:()=>console.log("Change profile picture"),children:(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})]})}),(0,c.jsx)(i.pd,{label:d("profile.name")||"Name",type:"text",id:"name",name:"name",value:m.name,onChange:v,disabled:!h}),(0,c.jsx)(i.pd,{label:d("profile.email")||"Email",type:"email",id:"email",name:"email",value:m.email,onChange:v,disabled:!h}),(0,c.jsx)(i.pd,{label:d("profile.phone")||"Phone",type:"tel",id:"phone",name:"phone",value:m.phone,onChange:v,disabled:!h}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"job_type",className:"block text-sm font-medium text-gray-300",children:d("profile.jobType")||"Job Type"}),(0,c.jsxs)("select",{id:"job_type",name:"job_type",className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:m.job_type,onChange:v,disabled:!h,children:[(0,c.jsx)("option",{value:"",children:d("common.select")||"Select..."}),(0,c.jsx)("option",{value:"pump_tech",children:d("jobTypes.pumpTech")||"Pump Technician"}),(0,c.jsx)("option",{value:"driver",children:d("jobTypes.driver")||"Driver"}),(0,c.jsx)("option",{value:"admin",children:d("jobTypes.admin")||"Administrator"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"preferred_language",className:"block text-sm font-medium text-gray-300",children:d("profile.preferredLanguage")||"Preferred Language"}),(0,c.jsxs)("select",{id:"preferred_language",name:"preferred_language",className:"bg-gray-800 block w-full rounded-md border-gray-700 text-white shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm",value:m.preferred_language,onChange:v,disabled:!h,children:[(0,c.jsx)("option",{value:"en",children:"English"}),(0,c.jsx)("option",{value:"es",children:"Espa\xf1ol"})]})]}),(0,c.jsx)("div",{className:"flex justify-end space-x-4 pt-4",children:h?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.$n,{type:"button",variant:"secondary",onClick:()=>u(!1),disabled:p,children:d("common.cancel")||"Cancel"}),(0,c.jsx)(i.$n,{type:"submit",variant:"primary",disabled:p,children:p?(0,c.jsx)(i.kt,{size:"sm"}):d("common.save")||"Save"})]}):(0,c.jsx)(i.$n,{type:"button",variant:"primary",onClick:()=>u(!0),children:d("profile.edit")||"Edit Profile"})})]})})})]})}},8137:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var a=s(5043),r=s(3216),n=s(9265),l=s(3059),i=s(8327),c=s(3309),o=s(911),d=s(997),m=s(8365),x=s(1215),h=s(6294),u=s(7949),p=s(948),j=s(1847),g=s(787),b=s(1086),f=s(2455),y=s(2136),v=s(8729),k=s(3526),w=s(579);const N=()=>{const{t:e}=(0,y.ok)(),{selectedDraftTicket:t,setViewMode:s,setSelectedDraftTicket:r}=(0,l.yS)(),{user:n}=(0,v.As)(),i=(0,a.useCallback)((()=>{s("draftList"),r(null)}),[s,r]),c=(0,a.useMemo)((()=>{if(!n||!n.job_type)return b.zh;const e=n.job_type.toLowerCase().replace(/[\s_-]/g,"_");return{pump_tech:b.zh,pump_technician:b.zh,pumptechnician:b.zh,pump_service_technician:b.zh,driver:b.Vq}[e]||b.zh}),[n]),o=(0,a.useMemo)((()=>t||{}),[t]);return o.id?(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsxs)("button",{onClick:i,className:"absolute top-0 left-0 text-white flex items-center space-x-1 hover:text-gray-300 transition-colors","aria-label":e("common.goBack"),children:[(0,w.jsx)(f.A,{className:"h-4 w-4"}),(0,w.jsx)("span",{className:"text-sm",children:e("common.goBack")})]}),(0,w.jsxs)("div",{className:"pt-8",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,w.jsx)("p",{className:"text-sm text-orange-500 italic",children:e("jobTicket.readOnlyMode")}),(0,w.jsxs)("p",{className:"text-sm text-gray-400",children:[e("jobTicket.draftId"),": ",o.id.substring(0,8)]})]}),(0,w.jsx)(c,{readOnly:!0,draftData:o})]})]}):(0,w.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,w.jsx)("p",{className:"text-gray-400 mb-4",children:e("jobTicket.noTicketSelected")}),(0,w.jsx)(k.$n,{variant:"primary",onClick:i,children:e("jobTicket.returnToDrafts")})]})},T=a.memo(N),_=()=>{const{viewMode:e,ticketMode:t}=(0,l.yS)();return(0,w.jsxs)(w.Fragment,{children:["draftList"===e&&(0,w.jsx)(p.default,{}),"submittedList"===e&&(0,w.jsx)(j.default,{}),"landing"===e&&null===t&&(0,w.jsx)(d.default,{}),"form"===e&&"voice"===t&&(0,w.jsx)(m.A,{}),"form"===e&&"manual"===t&&(0,w.jsx)(g.default,{}),"draft"===e&&(0,w.jsx)(T,{})]})},C=()=>{const[e,t]=(0,a.useState)(!1),s=(0,a.useRef)(),m=(0,a.useRef)();return(0,a.useEffect)((()=>{const a=a=>{window.innerWidth>=768||e&&m.current&&!m.current.contains(a.target)&&s.current&&!s.current.contains(a.target)&&t(!1)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}),[e]),(0,w.jsx)(l.YR,{children:(0,w.jsx)(i.QP,{children:(0,w.jsxs)("div",{className:"bg-slate-900 min-h-screen",children:[(0,w.jsx)("div",{className:"h-14 relative",children:(0,w.jsx)(o.A,{})}),(0,w.jsxs)("div",{className:"flex",children:[(0,w.jsx)("button",{ref:s,className:"md:hidden fixed top-4 left-4 z-50 p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700",onClick:()=>t(!e),children:(0,w.jsx)(n.A,{className:"h-6 w-6","aria-hidden":"true"})}),(0,w.jsx)(c.A,{sidebarOpen:e,setSidebarOpen:t,ref:m}),(0,w.jsx)("main",{className:"flex-1 bg-slate-900 p-6 overflow-y-auto text-white",children:(0,w.jsx)("div",{className:"mt-2 md:mt-0 pl-14 md:pl-0 md:ml-64",children:(0,w.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,w.jsxs)(r.BV,{children:[(0,w.jsx)(r.qh,{path:"/",element:(0,w.jsx)(_,{})}),(0,w.jsx)(r.qh,{path:"/landing",element:(0,w.jsx)(d.default,{})}),(0,w.jsx)(r.qh,{path:"/profile",element:(0,w.jsx)(u.default,{})}),(0,w.jsx)(r.qh,{path:"/job-ticket-form",element:(0,w.jsx)(x.default,{})}),(0,w.jsx)(r.qh,{path:"/job-ticket-selector",element:(0,w.jsx)(g.default,{})}),(0,w.jsx)(r.qh,{path:"/voice-recorder",element:(0,w.jsx)(h.default,{})}),(0,w.jsx)(r.qh,{path:"/submitted",element:(0,w.jsx)(j.default,{})}),(0,w.jsx)(r.qh,{path:"/drafts",element:(0,w.jsx)(p.default,{})})]})})})})]})]})})})}},9265:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(3986),r=s(5043);const n=["title","titleId"];const l=r.forwardRef((function(e,t){let{title:s,titleId:l}=e,i=(0,a.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":l},i),s?r.createElement("title",{id:l},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}))}}]);
//# sourceMappingURL=dashboard.ac41f3f7.chunk.js.map